///////////////////////////////////////////////////////////////////////////////
//    Land 12 Globals
//    ~~~~~~~~~~~~~~~
//
///////////////////////////////////////////////////////////////////////////////

// Other Defines
define oCreature = 0
define script Globals
define script LC12_CreateUndeadPlatoon(whichPlatoon,howManyVillagers,whichMesh)

define s_aztecwarrior_ghost = 0
define s_skeletonadultland2 = 1
define s_undeadwarrior_noghost = 2

// Debug switch
global DEBUG = 1
global Intro = 1

global CinemaIsRunning = 0
global MigrationsAccepted = 0
global TownsConverted = 0
global TownsAggressiveConverted = 0
global TownsPeacefulConverted = 0
global UnderAttack = 0
global IntroFinished = 0
global DeleteWeather = 0
global AttackingPlatoons = 0

global PlayerTown = 0
global MinorTown1 = 0
global MinorTown2 = 0
global MinorTown3 = 0
global MinorTown4 = 0
global AztecTown1 = 0
global AztecTown2 = 0
global AztecCapital = 0
global NearestSettlement = 0

global MINOR_TOWN1_IMPRESSIVENESS = 6000
global MINOR_TOWN2_IMPRESSIVENESS = 12000
global MINOR_TOWN3_IMPRESSIVENESS = 18000
global MINOR_TOWN4_IMPRESSIVENESS = 24000
global AZTECTOWN1_IMPRESSIVENESS = 40000 
global AZTECTOWN2_IMPRESSIVENESS = 45000
global AZTECCAPITAL_IMPRESSIVENESS = 55000

global AttackNearestTownTimer = 0
global LC12_RecruitTimer1 = 0
global LC12_RecruitTimer2 = 0
global LC12_RecruitTimer3 = 0


begin script Globals

SecondPlaythrough = 0

start

    MINOR_TOWN1_IMPRESSIVENESS = MINOR_TOWN1_IMPRESSIVENESS *  ImpressivenessModifier
    MINOR_TOWN2_IMPRESSIVENESS = MINOR_TOWN2_IMPRESSIVENESS *  ImpressivenessModifier
    MINOR_TOWN3_IMPRESSIVENESS = MINOR_TOWN3_IMPRESSIVENESS *  ImpressivenessModifier
    MINOR_TOWN4_IMPRESSIVENESS = MINOR_TOWN4_IMPRESSIVENESS *  ImpressivenessModifier
    AZTECTOWN1_IMPRESSIVENESS = AZTECTOWN1_IMPRESSIVENESS *  ImpressivenessModifier
    AZTECTOWN2_IMPRESSIVENESS = AZTECTOWN2_IMPRESSIVENESS *  ImpressivenessModifier
    AZTECCAPITAL_IMPRESSIVENESS = AZTECCAPITAL_IMPRESSIVENESS *  ImpressivenessModifier

    SecondPlaythrough = persistent data "SECOND_PLAYTHROUGH"

    GB_PlayerTown = get town with id 0//For Global Script
    PlayerTown = get town with id 0
    MinorTown1 = get town with id 3
    MinorTown2 = get town with id 8
    MinorTown3 = get town with id 11
    MinorTown4 = get town with id 12
    AztecTown1 = get town with id 4
    AztecTown2 = get town with id 5
    AztecCapital = get town with id 13
    
end script Globals


//Only works with global platoons
begin script LC12_CreateUndeadPlatoon(whichPlatoon,howManyVillagers,whichMesh)

    Ghost[200]
    counter = 0
    Villager = 0
    VillagerTemp = 0

start

    //Remove old villagers
    while counter < howManyVillagers - 1
        if counter < howManyVillagers
            Villager = get villager from platoon whichPlatoon nearest {whichPlatoon}
            delete Villager
        end if
        counter++
    end while
    Villager = get villager from platoon whichPlatoon nearest {whichPlatoon}
    counter = 0

    while counter < howManyVillagers

        //Create ghosts
        Ghost[counter] = create VILLAGER NORSE_HOUSEWIFE at {whichPlatoon} 
        add villager Ghost[counter] to platoon whichPlatoon

        //Set new mesh
        if whichMesh == s_aztecwarrior_ghost
            set anim speed of Ghost[counter] to 0.75
            override mesh for Ghost[counter] with "..\skins\s_aztecwarrior_ghost"
        elsif whichMesh == s_skeletonadultland2
            set anim speed of Ghost[counter] to 0.5
            override mesh for Ghost[counter] with "..\skins\s_skeletonadultland2"
        else
            set anim speed of Ghost[counter] to 0.6
            override mesh for Ghost[counter] with "..\skins\s_undeadwarrior_noghost"
        end if
        counter++
    end while

    delete Villager

end script LC12_CreateUndeadPlatoon