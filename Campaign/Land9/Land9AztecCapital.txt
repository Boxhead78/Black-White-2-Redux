///////////////////////////////////////////////////////////////////////////////
//    Land 9 Aztec-Strategy
//    ~~~~~~~~~~~~~~~~~~~~~~~~~~~
//
//    Start date:     29.03.18            By: Boxhead
//    Update date:    04.04.18            By: Boxhead
///////////////////////////////////////////////////////////////////////////////

define script LC9_Aztec_Capital_Impressiveness
define script LC9_TownConversion
define script LC9_Tribute
define script LC9_GatehouseManager
define script LC9_Speeches
define script LC9_Aztec_Capital
define script LC9_AttackNearestTownTimer
define script LC9_DefendPlatoons
define script LC9_EarthquakeCinema(Earthquake)
define script LC9_LargeAttackTimer
define script LC9_FireRainIntro
define script LC9_FireRain
define script LC9_GetNearestSettlement
define script LC9_Build_Aztec_Capital
define script LC9_AztecCapitalRessourceManager
define script LC9_AztecCapitalVillagerManager
define script LC9_AztecTown1RessourceManager
define script LC9_AztecTown1VillagerManager
define script LC9_AztecTown2RessourceManager
define script LC9_AztecTown2VillagerManager
define script LC9_AztecTown3RessourceManager
define script LC9_AztecTown3VillagerManager
define script LC9_PlatoonBehaivors
define script LC9_FireRainTempleEffects(Weather)
define script LC9_FireBalls(Position, Weather)
define script LC9_FireBallsBarrel(Position, Weather)
define script LC9_WeatherLightning(Position, Weather)
define script DisableLocalPlatoonResponse

begin script LC9_Aztec_Capital_Impressiveness

    Threshold = 0

start

    Threshold = get town MinorTown1 impressiveness
    Threshold = Threshold / 3
    set migration threshold from MinorTown1 to PlayerTown MINOR_TOWN1_IMPRESSIVENESS - Threshold

    Threshold = get town MinorTown2 impressiveness
    Threshold = Threshold / 3
    set migration threshold from MinorTown2 to PlayerTown MINOR_TOWN2_IMPRESSIVENESS - Threshold

    Threshold = get town MinorTown3 impressiveness
    Threshold = Threshold / 3
    set migration threshold from MinorTown3 to PlayerTown MINOR_TOWN3_IMPRESSIVENESS - Threshold

    Threshold = get town MinorTown4 impressiveness
    Threshold = Threshold / 3
    set migration threshold from MinorTown4 to PlayerTown MINOR_TOWN4_IMPRESSIVENESS - Threshold

    Threshold = get town MinorTown5 impressiveness
    Threshold = Threshold / 3
    set migration threshold from MinorTown5 to PlayerTown MINOR_TOWN5_IMPRESSIVENESS - Threshold

    Threshold = get town MinorTown6 impressiveness
    Threshold = Threshold / 3
    set migration threshold from MinorTown6 to PlayerTown MINOR_TOWN6_IMPRESSIVENESS - Threshold

    Threshold = get town MinorTown7 impressiveness
    Threshold = Threshold / 3
    set migration threshold from MinorTown7 to PlayerTown MINOR_TOWN7_IMPRESSIVENESS - Threshold

    Threshold = get town MinorTown8 impressiveness
    Threshold = Threshold / 3
    set migration threshold from MinorTown8 to PlayerTown MINOR_TOWN8_IMPRESSIVENESS - Threshold

    Threshold = get town AztecTown1 impressiveness
    Threshold = Threshold / 3
    set migration threshold from AztecTown1 to PlayerTown AZTEC_TOWN1_IMPRESSIVENESS - Threshold

    Threshold = get town AztecTown2 impressiveness
    Threshold = Threshold / 3
    set migration threshold from AztecTown2 to PlayerTown AZTEC_TOWN2_IMPRESSIVENESS - Threshold

    Threshold = get town AztecTown3 impressiveness
    Threshold = Threshold / 3
    set migration threshold from AztecTown3 to PlayerTown AZTEC_TOWN3_IMPRESSIVENESS - Threshold

    Threshold = get town AztecCapital impressiveness
    Threshold = Threshold / 3
    set migration threshold from AztecCapital to PlayerTown AZTEC_CAPITAL_IMPRESSIVENESS - Threshold

    if PLAYER of MinorTown1 == 0
        enable migration from MinorTown2 to MinorTown1
        enable migration from MinorTown3 to MinorTown1
        enable migration from MinorTown4 to MinorTown1
        enable migration from MinorTown5 to MinorTown1
        enable migration from MinorTown6 to MinorTown1
        enable migration from MinorTown7 to MinorTown1
        enable migration from MinorTown8 to MinorTown1
        enable migration from AztecTown1 to MinorTown1
        enable migration from AztecTown2 to MinorTown1
        enable migration from AztecTown3 to MinorTown1
        enable migration from AztecCapital to MinorTown1
        
    elsif PLAYER of MinorTown1 >= 1
        disable migration from MinorTown2 to MinorTown1
        disable migration from MinorTown3 to MinorTown1
        disable migration from MinorTown4 to MinorTown1
        disable migration from MinorTown5 to MinorTown1
        disable migration from MinorTown6 to MinorTown1
        disable migration from MinorTown7 to MinorTown1
        disable migration from MinorTown8 to MinorTown1
        disable migration from AztecTown1 to MinorTown1
        disable migration from AztecTown2 to MinorTown1
        disable migration from AztecTown3 to MinorTown1
        disable migration from AztecCapital to MinorTown1
    end if

    if PLAYER of MinorTown2 == 0
        enable migration from MinorTown1 to MinorTown2
        enable migration from MinorTown3 to MinorTown2
        enable migration from MinorTown4 to MinorTown2
        enable migration from MinorTown5 to MinorTown2
        enable migration from MinorTown6 to MinorTown2
        enable migration from MinorTown7 to MinorTown2
        enable migration from MinorTown8 to MinorTown2
        enable migration from AztecTown1 to MinorTown2
        enable migration from AztecTown2 to MinorTown2
        enable migration from AztecTown3 to MinorTown2
        enable migration from AztecCapital to MinorTown2
        
    elsif PLAYER of MinorTown2 >= 1
        disable migration from MinorTown1 to MinorTown2
        disable migration from MinorTown3 to MinorTown2
        disable migration from MinorTown4 to MinorTown2
        disable migration from MinorTown5 to MinorTown2
        disable migration from MinorTown6 to MinorTown2
        disable migration from MinorTown7 to MinorTown2
        disable migration from MinorTown8 to MinorTown2
        disable migration from AztecTown1 to MinorTown2
        disable migration from AztecTown2 to MinorTown2
        disable migration from AztecTown3 to MinorTown2
        disable migration from AztecCapital to MinorTown2
    end if

    if PLAYER of MinorTown3 == 0
        enable migration from MinorTown1 to MinorTown3
        enable migration from MinorTown2 to MinorTown3
        enable migration from MinorTown4 to MinorTown3
        enable migration from MinorTown5 to MinorTown3
        enable migration from MinorTown6 to MinorTown3
        enable migration from MinorTown7 to MinorTown3
        enable migration from MinorTown8 to MinorTown3
        enable migration from AztecTown1 to MinorTown3
        enable migration from AztecTown2 to MinorTown3
        enable migration from AztecTown3 to MinorTown3
        enable migration from AztecCapital to MinorTown3
        
    elsif PLAYER of MinorTown3 >= 1
        disable migration from MinorTown1 to MinorTown3
        disable migration from MinorTown2 to MinorTown3
        disable migration from MinorTown4 to MinorTown3
        disable migration from MinorTown5 to MinorTown3
        disable migration from MinorTown6 to MinorTown3
        disable migration from MinorTown7 to MinorTown3
        disable migration from MinorTown8 to MinorTown3
        disable migration from AztecTown1 to MinorTown3
        disable migration from AztecTown2 to MinorTown3
        disable migration from AztecTown3 to MinorTown3
        disable migration from AztecCapital to MinorTown3
    end if

    if PLAYER of MinorTown4 == 0
        enable migration from MinorTown1 to MinorTown4
        enable migration from MinorTown2 to MinorTown4
        enable migration from MinorTown3 to MinorTown4
        enable migration from MinorTown5 to MinorTown4
        enable migration from MinorTown6 to MinorTown4
        enable migration from MinorTown7 to MinorTown4
        enable migration from MinorTown8 to MinorTown4
        enable migration from AztecTown1 to MinorTown4
        enable migration from AztecTown2 to MinorTown4
        enable migration from AztecTown3 to MinorTown4
        enable migration from AztecCapital to MinorTown4
        
    elsif PLAYER of MinorTown4 >= 1
        disable migration from MinorTown1 to MinorTown4
        disable migration from MinorTown2 to MinorTown4
        disable migration from MinorTown3 to MinorTown4
        disable migration from MinorTown5 to MinorTown4
        disable migration from MinorTown6 to MinorTown4
        disable migration from MinorTown7 to MinorTown4
        disable migration from MinorTown8 to MinorTown4
        disable migration from AztecTown1 to MinorTown4
        disable migration from AztecTown2 to MinorTown4
        disable migration from AztecTown3 to MinorTown4
        disable migration from AztecCapital to MinorTown4
    end if

    if PLAYER of MinorTown5 == 0
        enable migration from MinorTown1 to MinorTown5
        enable migration from MinorTown2 to MinorTown5
        enable migration from MinorTown3 to MinorTown5
        enable migration from MinorTown4 to MinorTown5
        enable migration from MinorTown6 to MinorTown5
        enable migration from MinorTown7 to MinorTown5
        enable migration from MinorTown8 to MinorTown5
        enable migration from AztecTown1 to MinorTown5
        enable migration from AztecTown2 to MinorTown5
        enable migration from AztecTown3 to MinorTown5
        enable migration from AztecCapital to MinorTown5
        
    elsif PLAYER of MinorTown5 >= 1
        disable migration from MinorTown1 to MinorTown5
        disable migration from MinorTown2 to MinorTown5
        disable migration from MinorTown3 to MinorTown5
        disable migration from MinorTown4 to MinorTown5
        disable migration from MinorTown6 to MinorTown5
        disable migration from MinorTown7 to MinorTown5
        disable migration from MinorTown8 to MinorTown5
        disable migration from AztecTown1 to MinorTown5
        disable migration from AztecTown2 to MinorTown5
        disable migration from AztecTown3 to MinorTown5
        disable migration from AztecCapital to MinorTown5
    end if

    if PLAYER of MinorTown6 == 0
        enable migration from MinorTown1 to MinorTown6
        enable migration from MinorTown2 to MinorTown6
        enable migration from MinorTown3 to MinorTown6
        enable migration from MinorTown4 to MinorTown6
        enable migration from MinorTown5 to MinorTown6
        enable migration from MinorTown7 to MinorTown6
        enable migration from MinorTown8 to MinorTown6
        enable migration from AztecTown1 to MinorTown6
        enable migration from AztecTown2 to MinorTown6
        enable migration from AztecTown3 to MinorTown6
        enable migration from AztecCapital to MinorTown6
        
    elsif PLAYER of MinorTown6 >= 1
        disable migration from MinorTown1 to MinorTown6
        disable migration from MinorTown2 to MinorTown6
        disable migration from MinorTown3 to MinorTown6
        disable migration from MinorTown4 to MinorTown6
        disable migration from MinorTown5 to MinorTown6
        disable migration from MinorTown7 to MinorTown6
        disable migration from MinorTown8 to MinorTown6
        disable migration from AztecTown1 to MinorTown6
        disable migration from AztecTown2 to MinorTown6
        disable migration from AztecTown3 to MinorTown6
        disable migration from AztecCapital to MinorTown6
    end if

    if PLAYER of MinorTown7 == 0
        enable migration from MinorTown1 to MinorTown7
        enable migration from MinorTown2 to MinorTown7
        enable migration from MinorTown3 to MinorTown7
        enable migration from MinorTown4 to MinorTown7
        enable migration from MinorTown5 to MinorTown7
        enable migration from MinorTown6 to MinorTown7
        enable migration from MinorTown8 to MinorTown7
        enable migration from AztecTown1 to MinorTown7
        enable migration from AztecTown2 to MinorTown7
        enable migration from AztecTown3 to MinorTown7
        enable migration from AztecCapital to MinorTown7
        
    elsif PLAYER of MinorTown7 >= 1
        disable migration from MinorTown1 to MinorTown7
        disable migration from MinorTown2 to MinorTown7
        disable migration from MinorTown3 to MinorTown7
        disable migration from MinorTown4 to MinorTown7
        disable migration from MinorTown5 to MinorTown7
        disable migration from MinorTown6 to MinorTown7
        disable migration from MinorTown8 to MinorTown7
        disable migration from AztecTown1 to MinorTown7
        disable migration from AztecTown2 to MinorTown7
        disable migration from AztecTown3 to MinorTown7
        disable migration from AztecCapital to MinorTown7
    end if

    if PLAYER of MinorTown8 == 0
        enable migration from MinorTown1 to MinorTown8
        enable migration from MinorTown2 to MinorTown8
        enable migration from MinorTown3 to MinorTown8
        enable migration from MinorTown4 to MinorTown8
        enable migration from MinorTown5 to MinorTown8
        enable migration from MinorTown6 to MinorTown8
        enable migration from MinorTown7 to MinorTown8
        enable migration from AztecTown1 to MinorTown8
        enable migration from AztecTown2 to MinorTown8
        enable migration from AztecTown3 to MinorTown8
        enable migration from AztecCapital to MinorTown8
        
    elsif PLAYER of MinorTown8 >= 1
        disable migration from MinorTown1 to MinorTown8
        disable migration from MinorTown2 to MinorTown8
        disable migration from MinorTown3 to MinorTown8
        disable migration from MinorTown4 to MinorTown8
        disable migration from MinorTown5 to MinorTown8
        disable migration from MinorTown6 to MinorTown8
        disable migration from MinorTown7 to MinorTown8
        disable migration from AztecTown1 to MinorTown8
        disable migration from AztecTown2 to MinorTown8
        disable migration from AztecTown3 to MinorTown8
        disable migration from AztecCapital to MinorTown8
    end if

    if PLAYER of AztecTown1 == 0
        enable migration from MinorTown1 to AztecTown1
        enable migration from MinorTown2 to AztecTown1
        enable migration from MinorTown3 to AztecTown1
        enable migration from MinorTown4 to AztecTown1
        enable migration from MinorTown5 to AztecTown1
        enable migration from MinorTown6 to AztecTown1
        enable migration from MinorTown7 to AztecTown1
        enable migration from MinorTown8 to AztecTown1
        enable migration from AztecTown2 to AztecTown1
        enable migration from AztecTown3 to AztecTown1
        enable migration from AztecCapital to AztecTown1
        
    elsif PLAYER of AztecTown1 >= 1
        disable migration from MinorTown1 to AztecTown1
        disable migration from MinorTown2 to AztecTown1
        disable migration from MinorTown3 to AztecTown1
        disable migration from MinorTown4 to AztecTown1
        disable migration from MinorTown5 to AztecTown1
        disable migration from MinorTown6 to AztecTown1
        disable migration from MinorTown7 to AztecTown1
        disable migration from MinorTown8 to AztecTown1
        disable migration from AztecTown2 to AztecTown1
        disable migration from AztecTown3 to AztecTown1
        disable migration from AztecCapital to AztecTown1
    end if

    if PLAYER of AztecTown2 == 0
        enable migration from MinorTown1 to AztecTown2
        enable migration from MinorTown2 to AztecTown2
        enable migration from MinorTown3 to AztecTown2
        enable migration from MinorTown4 to AztecTown2
        enable migration from MinorTown5 to AztecTown2
        enable migration from MinorTown6 to AztecTown2
        enable migration from MinorTown7 to AztecTown2
        enable migration from MinorTown8 to AztecTown2
        enable migration from AztecTown1 to AztecTown2
        enable migration from AztecTown3 to AztecTown2
        enable migration from AztecCapital to AztecTown2
        
    elsif PLAYER of AztecTown2 >= 1
        disable migration from MinorTown1 to AztecTown2
        disable migration from MinorTown2 to AztecTown2
        disable migration from MinorTown3 to AztecTown2
        disable migration from MinorTown4 to AztecTown2
        disable migration from MinorTown5 to AztecTown2
        disable migration from MinorTown6 to AztecTown2
        disable migration from MinorTown7 to AztecTown2
        disable migration from MinorTown8 to AztecTown2
        disable migration from AztecTown1 to AztecTown2
        disable migration from AztecTown3 to AztecTown2
        disable migration from AztecCapital to AztecTown2
    end if

    if PLAYER of AztecTown3 == 0
        enable migration from MinorTown1 to AztecTown3
        enable migration from MinorTown2 to AztecTown3
        enable migration from MinorTown3 to AztecTown3
        enable migration from MinorTown4 to AztecTown3
        enable migration from MinorTown5 to AztecTown3
        enable migration from MinorTown6 to AztecTown3
        enable migration from MinorTown7 to AztecTown3
        enable migration from MinorTown8 to AztecTown3
        enable migration from AztecTown1 to AztecTown3
        enable migration from AztecTown2 to AztecTown3
        enable migration from AztecCapital to AztecTown3
        
    elsif PLAYER of AztecTown3 >= 1
        disable migration from MinorTown1 to AztecTown3
        disable migration from MinorTown2 to AztecTown3
        disable migration from MinorTown3 to AztecTown3
        disable migration from MinorTown4 to AztecTown3
        disable migration from MinorTown5 to AztecTown3
        disable migration from MinorTown6 to AztecTown3
        disable migration from MinorTown7 to AztecTown3
        disable migration from MinorTown8 to AztecTown3
        disable migration from AztecTown1 to AztecTown3
        disable migration from AztecTown2 to AztecTown3
        disable migration from AztecCapital to AztecTown3
    end if

    if PLAYER of AztecCapital == 0
        enable migration from MinorTown1 to AztecCapital
        enable migration from MinorTown2 to AztecCapital
        enable migration from MinorTown3 to AztecCapital
        enable migration from MinorTown4 to AztecCapital
        enable migration from MinorTown5 to AztecCapital
        enable migration from MinorTown6 to AztecCapital
        enable migration from MinorTown7 to AztecCapital
        enable migration from MinorTown8 to AztecCapital
        enable migration from AztecTown1 to AztecCapital
        enable migration from AztecTown2 to AztecCapital
        enable migration from AztecTown3 to AztecCapital
        
    elsif PLAYER of AztecCapital >= 1
        disable migration from MinorTown1 to AztecCapital
        disable migration from MinorTown2 to AztecCapital
        disable migration from MinorTown3 to AztecCapital
        disable migration from MinorTown4 to AztecCapital
        disable migration from MinorTown5 to AztecCapital
        disable migration from MinorTown6 to AztecCapital
        disable migration from MinorTown7 to AztecCapital
        disable migration from MinorTown8 to AztecCapital
        disable migration from AztecTown1 to AztecCapital
        disable migration from AztecTown2 to AztecCapital
        disable migration from AztecTown3 to AztecCapital
    end if

end script LC9_Aztec_Capital_Impressiveness

begin script LC9_TownConversion

    isConverted1 = 0
    isConverted2 = 0
    isConverted3 = 0
    isConverted4 = 0
    isConverted5 = 0
    isConverted6 = 0
    isConverted7 = 0
    isConverted8 = 0
    isConverted9 = 0
    isConverted10 = 0
    isConverted11 = 0
    isConverted12 = 0
    a = 0
    b = 0
    c = 0
    d = 0
    e = 0
    f = 0
    g = 0
    h = 0
    i = 0
    j = 0
    k = 0
    l = 0
    
start

begin loop

    isConverted1 = variable get town MinorTown1 method of last conversion
    isConverted2 = variable get town MinorTown2 method of last conversion
    isConverted3 = variable get town MinorTown3 method of last conversion
    isConverted4 = variable get town MinorTown4 method of last conversion
    isConverted5 = variable get town MinorTown5 method of last conversion
    isConverted6 = variable get town MinorTown6 method of last conversion
    isConverted7 = variable get town MinorTown7 method of last conversion
    isConverted8 = variable get town MinorTown8 method of last conversion
    isConverted9 = variable get town AztecTown1 method of last conversion
    isConverted10 = variable get town AztecTown2 method of last conversion
    isConverted11 = variable get town AztecTown3 method of last conversion
    isConverted12 = variable get town AztecCapital method of last conversion

    if isConverted1 != 0 and a == 0
        if PLAYER of MinorTown1 == 0 or get town MinorTown1 is migrating to == PlayerTown
            a = 1
            TownsConverted = TownsConverted + 1
            if isConverted1 == 1
                TownsAggressiveConverted = TownsAggressiveConverted + 1
            elsif isConverted1 == 2
                TownsPeacefulConverted = TownsPeacefulConverted + 1
            end if
        end if
    end if

    if isConverted1 != 0
        if PLAYER of AztecCapital == 1
            disable migration from MinorTown1 to MinorTown2
            disable migration from MinorTown1 to MinorTown3
            disable migration from MinorTown1 to MinorTown4
            disable migration from MinorTown1 to MinorTown5
            disable migration from MinorTown1 to MinorTown6
            disable migration from MinorTown1 to MinorTown7
            disable migration from MinorTown1 to MinorTown8
            disable migration from MinorTown1 to AztecTown1
            disable migration from MinorTown1 to AztecTown2
            disable migration from MinorTown1 to AztecTown3
            disable migration from MinorTown1 to AztecCapital
            disable migration from MinorTown1 to PlayerTown
        else
            enable migration from MinorTown1 to MinorTown2
            enable migration from MinorTown1 to MinorTown3
            enable migration from MinorTown1 to MinorTown4
            enable migration from MinorTown1 to MinorTown5
            enable migration from MinorTown1 to MinorTown6
            enable migration from MinorTown1 to MinorTown7
            enable migration from MinorTown1 to MinorTown8
            enable migration from MinorTown1 to AztecTown1
            enable migration from MinorTown1 to AztecTown2
            enable migration from MinorTown1 to AztecTown3
            enable migration from MinorTown1 to AztecCapital
            enable migration from MinorTown1 to PlayerTown
        end if
    end if
    
    if isConverted2 != 0 and b == 0
        if PLAYER of MinorTown2 == 0 or get town MinorTown2 is migrating to == PlayerTown
            b = 1
            TownsConverted = TownsConverted + 1
            if isConverted2 == 1
                TownsAggressiveConverted = TownsAggressiveConverted + 1
            elsif isConverted2 == 2
                TownsPeacefulConverted = TownsPeacefulConverted + 1
            end if
        end if
    end if

    if isConverted2 != 0
        if PLAYER of AztecCapital == 1
            disable migration from MinorTown2 to MinorTown1
            disable migration from MinorTown2 to MinorTown3
            disable migration from MinorTown2 to MinorTown4
            disable migration from MinorTown2 to MinorTown5
            disable migration from MinorTown2 to MinorTown6
            disable migration from MinorTown2 to MinorTown7
            disable migration from MinorTown2 to MinorTown8
            disable migration from MinorTown2 to AztecTown1
            disable migration from MinorTown2 to AztecTown2
            disable migration from MinorTown2 to AztecTown3
            disable migration from MinorTown2 to AztecCapital
            disable migration from MinorTown2 to PlayerTown
        else
            enable migration from MinorTown2 to MinorTown1
            enable migration from MinorTown2 to MinorTown3
            enable migration from MinorTown2 to MinorTown4
            enable migration from MinorTown2 to MinorTown5
            enable migration from MinorTown2 to MinorTown6
            enable migration from MinorTown2 to MinorTown7
            enable migration from MinorTown2 to MinorTown8
            enable migration from MinorTown2 to AztecTown1
            enable migration from MinorTown2 to AztecTown2
            enable migration from MinorTown2 to AztecTown3
            enable migration from MinorTown2 to AztecCapital
            enable migration from MinorTown2 to PlayerTown
        end if
    end if
    
    if isConverted3 != 0 and c == 0
        if PLAYER of MinorTown3 == 0 or get town MinorTown3 is migrating to == PlayerTown
            c = 1
            TownsConverted = TownsConverted + 1
            if isConverted3 == 1
                TownsAggressiveConverted = TownsAggressiveConverted + 1
            elsif isConverted3 == 2
                TownsPeacefulConverted = TownsPeacefulConverted + 1
            end if
        end if
    end if

    if isConverted3 != 0
        if PLAYER of AztecCapital == 1
            disable migration from MinorTown3 to MinorTown1
            disable migration from MinorTown3 to MinorTown2
            disable migration from MinorTown3 to MinorTown4
            disable migration from MinorTown3 to MinorTown5
            disable migration from MinorTown3 to MinorTown6
            disable migration from MinorTown3 to MinorTown7
            disable migration from MinorTown3 to MinorTown8
            disable migration from MinorTown3 to AztecTown1
            disable migration from MinorTown3 to AztecTown2
            disable migration from MinorTown3 to AztecTown3
            disable migration from MinorTown3 to AztecCapital
            disable migration from MinorTown3 to PlayerTown
        else
            enable migration from MinorTown3 to MinorTown1
            enable migration from MinorTown3 to MinorTown2
            enable migration from MinorTown3 to MinorTown4
            enable migration from MinorTown3 to MinorTown5
            enable migration from MinorTown3 to MinorTown6
            enable migration from MinorTown3 to MinorTown7
            enable migration from MinorTown3 to MinorTown8
            enable migration from MinorTown3 to AztecTown1
            enable migration from MinorTown3 to AztecTown2
            enable migration from MinorTown3 to AztecTown3
            enable migration from MinorTown3 to AztecCapital
            enable migration from MinorTown3 to PlayerTown
        end if
    end if
    
    if isConverted4 != 0 and d == 0
        if PLAYER of MinorTown4 == 0 or get town MinorTown4 is migrating to == PlayerTown
            d = 1
            TownsConverted = TownsConverted + 1
            if isConverted4 == 1
                TownsAggressiveConverted = TownsAggressiveConverted + 1
            elsif isConverted4 == 2
                TownsPeacefulConverted = TownsPeacefulConverted + 1
            end if
        end if
    end if

    if isConverted4 != 0
        if PLAYER of AztecCapital == 1
            disable migration from MinorTown4 to MinorTown1
            disable migration from MinorTown4 to MinorTown2
            disable migration from MinorTown4 to MinorTown3
            disable migration from MinorTown4 to MinorTown5
            disable migration from MinorTown4 to MinorTown6
            disable migration from MinorTown4 to MinorTown7
            disable migration from MinorTown4 to MinorTown8
            disable migration from MinorTown4 to AztecTown1
            disable migration from MinorTown4 to AztecTown2
            disable migration from MinorTown4 to AztecTown3
            disable migration from MinorTown4 to AztecCapital
            disable migration from MinorTown4 to PlayerTown
        else
            enable migration from MinorTown4 to MinorTown1
            enable migration from MinorTown4 to MinorTown2
            enable migration from MinorTown4 to MinorTown3
            enable migration from MinorTown4 to MinorTown5
            enable migration from MinorTown4 to MinorTown6
            enable migration from MinorTown4 to MinorTown7
            enable migration from MinorTown4 to MinorTown8
            enable migration from MinorTown4 to AztecTown1
            enable migration from MinorTown4 to AztecTown2
            enable migration from MinorTown4 to AztecTown3
            enable migration from MinorTown4 to AztecCapital
            enable migration from MinorTown4 to PlayerTown
        end if
    end if
    
    if isConverted5 != 0 and e == 0
        if PLAYER of MinorTown5 == 0 or get town MinorTown5 is migrating to == PlayerTown
            e = 1
            TownsConverted = TownsConverted + 1
            if isConverted5 == 1
                TownsAggressiveConverted = TownsAggressiveConverted + 1
            elsif isConverted5 == 2
                TownsPeacefulConverted = TownsPeacefulConverted + 1
            end if
        end if
    end if

    if isConverted5 != 0
        if PLAYER of AztecCapital == 1
            disable migration from MinorTown5 to MinorTown1
            disable migration from MinorTown5 to MinorTown2
            disable migration from MinorTown5 to MinorTown3
            disable migration from MinorTown5 to MinorTown4
            disable migration from MinorTown5 to MinorTown6
            disable migration from MinorTown5 to MinorTown7
            disable migration from MinorTown5 to MinorTown8
            disable migration from MinorTown5 to AztecTown1
            disable migration from MinorTown5 to AztecTown2
            disable migration from MinorTown5 to AztecTown3
            disable migration from MinorTown5 to AztecCapital
            disable migration from MinorTown5 to PlayerTown
        else
            enable migration from MinorTown5 to MinorTown1
            enable migration from MinorTown5 to MinorTown2
            enable migration from MinorTown5 to MinorTown3
            enable migration from MinorTown5 to MinorTown4
            enable migration from MinorTown5 to MinorTown6
            enable migration from MinorTown5 to MinorTown7
            enable migration from MinorTown5 to MinorTown8
            enable migration from MinorTown5 to AztecTown1
            enable migration from MinorTown5 to AztecTown2
            enable migration from MinorTown5 to AztecTown3
            enable migration from MinorTown5 to AztecCapital
            enable migration from MinorTown5 to PlayerTown
        end if
    end if
    
    if isConverted6 != 0 and f == 0
        if PLAYER of MinorTown6 == 0 or get town MinorTown6 is migrating to == PlayerTown
            f = 1
            TownsConverted = TownsConverted + 1
            if isConverted6 == 1
                TownsAggressiveConverted = TownsAggressiveConverted + 1
            elsif isConverted6 == 2
                TownsPeacefulConverted = TownsPeacefulConverted + 1
            end if
        end if
    end if

    if isConverted6 != 0
        if PLAYER of AztecCapital == 1
            disable migration from MinorTown6 to MinorTown1
            disable migration from MinorTown6 to MinorTown2
            disable migration from MinorTown6 to MinorTown3
            disable migration from MinorTown6 to MinorTown4
            disable migration from MinorTown6 to MinorTown5
            disable migration from MinorTown6 to MinorTown7
            disable migration from MinorTown6 to MinorTown8
            disable migration from MinorTown6 to AztecTown1
            disable migration from MinorTown6 to AztecTown2
            disable migration from MinorTown6 to AztecTown3
            disable migration from MinorTown6 to AztecCapital
            disable migration from MinorTown6 to PlayerTown
        else
            enable migration from MinorTown6 to MinorTown1
            enable migration from MinorTown6 to MinorTown2
            enable migration from MinorTown6 to MinorTown3
            enable migration from MinorTown6 to MinorTown4
            enable migration from MinorTown6 to MinorTown5
            enable migration from MinorTown6 to MinorTown7
            enable migration from MinorTown6 to MinorTown8
            enable migration from MinorTown6 to AztecTown1
            enable migration from MinorTown6 to AztecTown2
            enable migration from MinorTown6 to AztecTown3
            enable migration from MinorTown6 to AztecCapital
            enable migration from MinorTown6 to PlayerTown
        end if
    end if
    
    if isConverted7 != 0 and g == 0
        if PLAYER of MinorTown7 == 0 or get town MinorTown7 is migrating to == PlayerTown
            g = 1
            TownsConverted = TownsConverted + 1
            if isConverted7 == 1
                TownsAggressiveConverted = TownsAggressiveConverted + 1
            elsif isConverted7 == 2
                TownsPeacefulConverted = TownsPeacefulConverted + 1
            end if
        end if
    end if    

    if isConverted7 != 0
        if PLAYER of AztecCapital == 1
            disable migration from MinorTown7 to MinorTown1
            disable migration from MinorTown7 to MinorTown2
            disable migration from MinorTown7 to MinorTown3
            disable migration from MinorTown7 to MinorTown4
            disable migration from MinorTown7 to MinorTown5
            disable migration from MinorTown7 to MinorTown6
            disable migration from MinorTown7 to MinorTown8
            disable migration from MinorTown7 to AztecTown1
            disable migration from MinorTown7 to AztecTown2
            disable migration from MinorTown7 to AztecTown3
            disable migration from MinorTown7 to AztecCapital
            disable migration from MinorTown7 to PlayerTown
        else
            enable migration from MinorTown7 to MinorTown1
            enable migration from MinorTown7 to MinorTown2
            enable migration from MinorTown7 to MinorTown3
            enable migration from MinorTown7 to MinorTown4
            enable migration from MinorTown7 to MinorTown5
            enable migration from MinorTown7 to MinorTown6
            enable migration from MinorTown7 to MinorTown8
            enable migration from MinorTown7 to AztecTown1
            enable migration from MinorTown7 to AztecTown2
            enable migration from MinorTown7 to AztecTown3
            enable migration from MinorTown7 to AztecCapital
            enable migration from MinorTown7 to PlayerTown
        end if
    end if
    
    if isConverted8 != 0 and h == 0
        if PLAYER of MinorTown8 == 0 or get town MinorTown8 is migrating to == PlayerTown
            h = 1
            TownsConverted = TownsConverted + 1
            if isConverted8 == 1
                TownsAggressiveConverted = TownsAggressiveConverted + 1
            elsif isConverted8 == 2
                TownsPeacefulConverted = TownsPeacefulConverted + 1
            end if
        end if
    end if

    if isConverted8 != 0
        if PLAYER of AztecCapital == 1
            disable migration from MinorTown8 to MinorTown1
            disable migration from MinorTown8 to MinorTown2
            disable migration from MinorTown8 to MinorTown3
            disable migration from MinorTown8 to MinorTown4
            disable migration from MinorTown8 to MinorTown5
            disable migration from MinorTown8 to MinorTown6
            disable migration from MinorTown8 to MinorTown7
            disable migration from MinorTown8 to AztecTown1
            disable migration from MinorTown8 to AztecTown2
            disable migration from MinorTown8 to AztecTown3
            disable migration from MinorTown8 to AztecCapital
            disable migration from MinorTown8 to PlayerTown
        else
            enable migration from MinorTown8 to MinorTown1
            enable migration from MinorTown8 to MinorTown2
            enable migration from MinorTown8 to MinorTown3
            enable migration from MinorTown8 to MinorTown4
            enable migration from MinorTown8 to MinorTown5
            enable migration from MinorTown8 to MinorTown6
            enable migration from MinorTown8 to MinorTown7
            enable migration from MinorTown8 to AztecTown1
            enable migration from MinorTown8 to AztecTown2
            enable migration from MinorTown8 to AztecTown3
            enable migration from MinorTown8 to AztecCapital
            enable migration from MinorTown8 to PlayerTown
        end if
    end if
    
    if isConverted9 != 0 and i == 0
        if PLAYER of AztecTown1 == 0 or get town AztecTown1 is migrating to == PlayerTown
            i = 1
            TownsConverted = TownsConverted + 1
            if isConverted9 == 1
                TownsAggressiveConverted = TownsAggressiveConverted + 1
            elsif isConverted9 == 2
                TownsPeacefulConverted = TownsPeacefulConverted + 1
            end if
        end if
    end if

    if isConverted9 != 0
        if PLAYER of AztecCapital == 1
            disable migration from AztecTown1 to MinorTown1
            disable migration from AztecTown1 to MinorTown2
            disable migration from AztecTown1 to MinorTown3
            disable migration from AztecTown1 to MinorTown4
            disable migration from AztecTown1 to MinorTown5
            disable migration from AztecTown1 to MinorTown6
            disable migration from AztecTown1 to MinorTown7
            disable migration from AztecTown1 to MinorTown8
            disable migration from AztecTown1 to AztecTown2
            disable migration from AztecTown1 to AztecTown3
            disable migration from AztecTown1 to AztecCapital
            disable migration from AztecTown1 to PlayerTown
        else
            enable migration from AztecTown1 to MinorTown1
            enable migration from AztecTown1 to MinorTown2
            enable migration from AztecTown1 to MinorTown3
            enable migration from AztecTown1 to MinorTown4
            enable migration from AztecTown1 to MinorTown5
            enable migration from AztecTown1 to MinorTown6
            enable migration from AztecTown1 to MinorTown7
            enable migration from AztecTown1 to MinorTown8
            enable migration from AztecTown1 to AztecTown2
            enable migration from AztecTown1 to AztecTown3
            enable migration from AztecTown1 to AztecCapital
            enable migration from AztecTown1 to PlayerTown
        end if
    end if
    
    if isConverted10 != 0 and j == 0
        if PLAYER of AztecTown2 == 0 or get town AztecTown2 is migrating to == PlayerTown
            j = 1
            TownsConverted = TownsConverted + 1
            if isConverted10 == 1
                TownsAggressiveConverted = TownsAggressiveConverted + 1
            elsif isConverted10 == 2
                TownsPeacefulConverted = TownsPeacefulConverted + 1
            end if
        end if
    end if

    if isConverted10 != 0
        if PLAYER of AztecCapital == 1
            disable migration from AztecTown2 to MinorTown1
            disable migration from AztecTown2 to MinorTown2
            disable migration from AztecTown2 to MinorTown3
            disable migration from AztecTown2 to MinorTown4
            disable migration from AztecTown2 to MinorTown5
            disable migration from AztecTown2 to MinorTown6
            disable migration from AztecTown2 to MinorTown7
            disable migration from AztecTown2 to MinorTown8
            disable migration from AztecTown2 to AztecTown1
            disable migration from AztecTown2 to AztecTown3
            disable migration from AztecTown2 to AztecCapital
            disable migration from AztecTown2 to PlayerTown
        else
            enable migration from AztecTown2 to MinorTown1
            enable migration from AztecTown2 to MinorTown2
            enable migration from AztecTown2 to MinorTown3
            enable migration from AztecTown2 to MinorTown4
            enable migration from AztecTown2 to MinorTown5
            enable migration from AztecTown2 to MinorTown6
            enable migration from AztecTown2 to MinorTown7
            enable migration from AztecTown2 to MinorTown8
            enable migration from AztecTown2 to AztecTown1
            enable migration from AztecTown2 to AztecTown3
            enable migration from AztecTown2 to AztecCapital
            enable migration from AztecTown2 to PlayerTown
        end if
    end if
    
    if isConverted11 != 0 and k == 0
        if PLAYER of AztecTown3 == 0 or get town AztecTown3 is migrating to == PlayerTown
            k = 1
            TownsConverted = TownsConverted + 1
            if isConverted11 == 1
                TownsAggressiveConverted = TownsAggressiveConverted + 1
            elsif isConverted11 == 2
                TownsPeacefulConverted = TownsPeacefulConverted + 1
            end if
        end if
    end if

    if isConverted11 != 0
        if PLAYER of AztecCapital == 1
            disable migration from AztecTown3 to MinorTown1
            disable migration from AztecTown3 to MinorTown2
            disable migration from AztecTown3 to MinorTown3
            disable migration from AztecTown3 to MinorTown4
            disable migration from AztecTown3 to MinorTown5
            disable migration from AztecTown3 to MinorTown6
            disable migration from AztecTown3 to MinorTown7
            disable migration from AztecTown3 to MinorTown8
            disable migration from AztecTown3 to AztecTown1
            disable migration from AztecTown3 to AztecTown2
            disable migration from AztecTown3 to AztecCapital
            disable migration from AztecTown3 to PlayerTown
        else
            enable migration from AztecTown3 to MinorTown1
            enable migration from AztecTown3 to MinorTown2
            enable migration from AztecTown3 to MinorTown3
            enable migration from AztecTown3 to MinorTown4
            enable migration from AztecTown3 to MinorTown5
            enable migration from AztecTown3 to MinorTown6
            enable migration from AztecTown3 to MinorTown7
            enable migration from AztecTown3 to MinorTown8
            enable migration from AztecTown3 to AztecTown1
            enable migration from AztecTown3 to AztecTown2
            enable migration from AztecTown3 to AztecCapital
            enable migration from AztecTown3 to PlayerTown
        end if
    end if
    
    if isConverted12 != 0 and l == 0
        if PLAYER of AztecCapital == 0 or get town AztecCapital is migrating to == PlayerTown
            l = 1
            TownsConverted = TownsConverted + 1
            if isConverted12 == 1
                TownsAggressiveConverted = TownsAggressiveConverted + 1
            elsif isConverted12 == 2
                TownsPeacefulConverted = TownsPeacefulConverted + 1
            end if
        end if
    end if    

    if isConverted12 != 0
        if PLAYER of AztecCapital == 1
            disable migration from AztecCapital to MinorTown1
            disable migration from AztecCapital to MinorTown2
            disable migration from AztecCapital to MinorTown3
            disable migration from AztecCapital to MinorTown4
            disable migration from AztecCapital to MinorTown5
            disable migration from AztecCapital to MinorTown6
            disable migration from AztecCapital to MinorTown7
            disable migration from AztecCapital to MinorTown8
            disable migration from AztecCapital to AztecTown1
            disable migration from AztecCapital to AztecTown2
            disable migration from AztecCapital to AztecTown3
            disable migration from AztecCapital to PlayerTown
        else
            enable migration from AztecCapital to MinorTown1
            enable migration from AztecCapital to MinorTown2
            enable migration from AztecCapital to MinorTown3
            enable migration from AztecCapital to MinorTown4
            enable migration from AztecCapital to MinorTown5
            enable migration from AztecCapital to MinorTown6
            enable migration from AztecCapital to MinorTown7
            enable migration from AztecCapital to MinorTown8
            enable migration from AztecCapital to AztecTown1
            enable migration from AztecCapital to AztecTown2
            enable migration from AztecCapital to AztecTown3
            enable migration from AztecCapital to PlayerTown
        end if
    end if
    
end loop

end script LC9_TownConversion

begin script LC9_Tribute

    mig1 = 0
    mig2 = 0
    mig3 = 0
    mig4 = 0
    mig5 = 0
    mig6 = 0
    mig7 = 0
    mig8 = 0
    mig9 = 0
    mig10 = 0
    mig11 = 0
    mig12 = 0
    a = 0

start

begin loop

    if (variable get town MinorTown1 status == variable MIGRATION_MIGRATED) and mig1 == 0 and get town MinorTown1 has migrated to == PlayerTown
        mig1 = 1
        MigrationsAccepted = MigrationsAccepted + 1
    end if
    
    if (variable get town MinorTown2 status == variable MIGRATION_MIGRATED) and mig2 == 0 and get town MinorTown2 has migrated to == PlayerTown
        mig2 = 1
        MigrationsAccepted = MigrationsAccepted + 1
    end if
    
    if (variable get town MinorTown3 status == variable MIGRATION_MIGRATED) and mig3 == 0 and get town MinorTown3 has migrated to == PlayerTown
        mig3 = 1
        MigrationsAccepted = MigrationsAccepted + 1
    end if
    
    if (variable get town MinorTown4 status == variable MIGRATION_MIGRATED) and mig4 == 0 and get town MinorTown4 has migrated to == PlayerTown
        mig4 = 1
        MigrationsAccepted = MigrationsAccepted + 1
    end if
    
    if (variable get town MinorTown5 status == variable MIGRATION_MIGRATED) and mig5 == 0 and get town MinorTown5 has migrated to == PlayerTown
        mig5 = 1
        MigrationsAccepted = MigrationsAccepted + 1
    end if
    
    if (variable get town MinorTown6 status == variable MIGRATION_MIGRATED) and mig6 == 0 and get town MinorTown6 has migrated to == PlayerTown
        mig6 = 1
        MigrationsAccepted = MigrationsAccepted + 1
    end if
    
    if (variable get town MinorTown7 status == variable MIGRATION_MIGRATED) and mig7 == 0 and get town MinorTown7 has migrated to == PlayerTown
        mig7 = 1
        MigrationsAccepted = MigrationsAccepted + 1
    end if
    
    if (variable get town MinorTown8 status == variable MIGRATION_MIGRATED) and mig8 == 0 and get town MinorTown8 has migrated to == PlayerTown
        mig8 = 1
        MigrationsAccepted = MigrationsAccepted + 1
    end if
    
    if (variable get town AztecTown1 status == variable MIGRATION_MIGRATED) and mig9 == 0 and get town AztecTown1 has migrated to == PlayerTown
        mig9 = 1
        MigrationsAccepted = MigrationsAccepted + 1
    end if
    
    if (variable get town AztecTown2 status == variable MIGRATION_MIGRATED) and mig10 == 0 and get town AztecTown2 has migrated to == PlayerTown
        mig10 = 1
        MigrationsAccepted = MigrationsAccepted + 1
    end if
    
    if (variable get town AztecTown3 status == variable MIGRATION_MIGRATED) and mig11 == 0 and get town AztecTown3 has migrated to == PlayerTown
        mig11 = 1
        MigrationsAccepted = MigrationsAccepted + 1
    end if
    
    if (variable get town AztecCapital status == variable MIGRATION_MIGRATED) and mig12 == 0 and get town AztecCapital has migrated to == PlayerTown
        mig12 = 1
        MigrationsAccepted = MigrationsAccepted + 1
    end if

    if MigrationsAccepted >= 1 and a == 0
        a = 1
        increment tribute by 5000
    end if
    
    if MigrationsAccepted >= 2 and a == 1
        a = 2
        increment tribute by 5000
    end if
    
    if MigrationsAccepted >= 3 and a == 2
        a = 3
        increment tribute by 5000
    end if
    
    if MigrationsAccepted >= 4 and a == 3
        a = 4
        increment tribute by 5000
    end if
    
    if MigrationsAccepted >= 5 and a == 4
        a = 5
        increment tribute by 10000
    end if
    
    if MigrationsAccepted >= 6 and a == 5
        a = 6
        increment tribute by 10000
    end if
    
    if MigrationsAccepted >= 7 and a == 6
        a = 7
        increment tribute by 15000
    end if
    
    if MigrationsAccepted >= 8 and a == 7
        a = 8
        increment tribute by 15000
    end if
    
    if MigrationsAccepted >= 9 and a == 8
        a = 9
        increment tribute by 15000
    end if
    
    if MigrationsAccepted >= 10 and a == 9
        a = 10
        increment tribute by 20000
    end if
    
    if MigrationsAccepted >= 11 and a == 10
        a = 11
        increment tribute by 20000
    end if
    
    if MigrationsAccepted >= 12 and a == 11
        a = 12
        increment tribute by 25000
    end if
    
end loop

end script LC9_Tribute

begin script LC9_GatehouseManager

    GateHouseT11 = 0
    GateHouseT12 = 0
    GateHouseT13 = 0
    GateHouseT14 = 0
    GateHouseT21 = 0
    GateHouseT22 = 0
    GateHouseT31 = 0
    GateHouseT32 = 0

    Counter = 0
    Cnt = 0

    oCreature = get player 0 creature

    PlayerPlatoonT11 = 0
    CatapultT11 = 0
    TestCreatureT11 = 0
    PlayerPlatoonT12 = 0
    CatapultT12 = 0
    TestCreatureT12 = 0
    PlayerPlatoonT13 = 0
    CatapultT13 = 0
    TestCreatureT13 = 0
    PlayerPlatoonT14 = 0
    CatapultT14 = 0
    TestCreatureT14 = 0

    EnemyNearDoorT11 = 0
    EnemyNearDoorT12 = 0
    EnemyNearDoorT13 = 0
    EnemyNearDoorT14 = 0

    PlayerPlatoonT21 = 0
    CatapultT21 = 0
    TestCreatureT21 = 0
    PlayerPlatoonT22 = 0
    CatapultT22 = 0
    TestCreatureT22 = 0

    EnemyNearDoorT21 = 0
    EnemyNearDoorT22 = 0

    PlayerPlatoonT31 = 0
    CatapultT31 = 0
    TestCreatureT31 = 0
    PlayerPlatoonT32 = 0
    CatapultT32 = 0
    TestCreatureT32 = 0

    EnemyNearDoorT31 = 0
    EnemyNearDoorT32 = 0

start

begin loop

    GateHouseT11 = get SCRIPT_OBJECT_TYPE_ABODE ABODE_NUMBER_GATEHOUSE_F at {936.99,21.56,776.15} radius 15
    GateHouseT12 = get SCRIPT_OBJECT_TYPE_ABODE ABODE_NUMBER_GATEHOUSE_F at {302.39,156.61,1550.69} radius 15
    GateHouseT13 = get SCRIPT_OBJECT_TYPE_ABODE ABODE_NUMBER_GATEHOUSE_F at {325.41,222.66,1857.80} radius 15
    GateHouseT14 = get SCRIPT_OBJECT_TYPE_ABODE ABODE_NUMBER_GATEHOUSE_F at {543.71,158.45,1842.38} radius 15
    
    oCreature = get player 0 creature

    if PLAYER of AztecCapital == 1

        if not town AztecCapital is under takeover from player 0
            PlayerPlatoonT11 = get platoon of player 0 nearest {GateHouseT11} radius 100
            CatapultT11 = get siege weapon of player 0 nearest {GateHouseT11} radius 100
            TestCreatureT11 = get distance from {GateHouseT11} to {oCreature}
            
            if PlayerPlatoonT11 exists
                EnemyNearDoorT11 = 1
            elsif CatapultT11 exists
                EnemyNearDoorT11 = 1
            elsif TestCreatureT11 < 200 and SCRIPT_OBJECT_PROPERTY_TYPE_HEALTH of oCreature > 0.00
                EnemyNearDoorT11 = 1
            else
                EnemyNearDoorT11 = 0
            end if
            
            if EnemyNearDoorT11 == 1
                set gate GateHouseT11 close
            else
                set gate GateHouseT11 open
            end if


            PlayerPlatoonT12 = get platoon of player 0 nearest {GateHouseT12} radius 100
            CatapultT12 = get siege weapon of player 0 nearest {GateHouseT12} radius 100
            TestCreatureT12 = get distance from {GateHouseT12} to {oCreature}
            
            if PlayerPlatoonT12 exists
                EnemyNearDoorT12 = 1
            elsif CatapultT12 exists
                EnemyNearDoorT12 = 1
            elsif TestCreatureT12 < 200 and SCRIPT_OBJECT_PROPERTY_TYPE_HEALTH of oCreature > 0.00
                EnemyNearDoorT12 = 1
            else
                EnemyNearDoorT12 = 0
            end if
            
            if EnemyNearDoorT12 == 1
                set gate GateHouseT12 close
            else
                set gate GateHouseT12 open
            end if


            PlayerPlatoonT13 = get platoon of player 0 nearest {GateHouseT13} radius 100
            CatapultT13 = get siege weapon of player 0 nearest {GateHouseT13} radius 100
            TestCreatureT13 = get distance from {GateHouseT13} to {oCreature}
            
            if PlayerPlatoonT13 exists
                EnemyNearDoorT13 = 1
            elsif CatapultT13 exists
                EnemyNearDoorT13 = 1
            elsif TestCreatureT13 < 200 and SCRIPT_OBJECT_PROPERTY_TYPE_HEALTH of oCreature > 0.00
                EnemyNearDoorT13 = 1
            else
                EnemyNearDoorT13 = 0
            end if
            
            if EnemyNearDoorT13 == 1
                set gate GateHouseT13 close
            else
                set gate GateHouseT13 open
            end if


            PlayerPlatoonT14 = get platoon of player 0 nearest {GateHouseT14} radius 100
            CatapultT14 = get siege weapon of player 0 nearest {GateHouseT14} radius 100
            TestCreatureT14 = get distance from {GateHouseT14} to {oCreature}
            
            if PlayerPlatoonT14 exists
                EnemyNearDoorT14 = 1
            elsif CatapultT14 exists
                EnemyNearDoorT14 = 1
            elsif TestCreatureT14 < 200 and SCRIPT_OBJECT_PROPERTY_TYPE_HEALTH of oCreature > 0.00
                EnemyNearDoorT14 = 1
            else
                EnemyNearDoorT14 = 0
            end if
            
            if EnemyNearDoorT14 == 1
                set gate GateHouseT14 close
            else
                set gate GateHouseT14 open
            end if
        else
            set gate GateHouseT11 open
            set gate GateHouseT12 open
            set gate GateHouseT13 open
            set gate GateHouseT14 open
        end if
    end if


    GateHouseT21 = get SCRIPT_OBJECT_TYPE_ABODE ABODE_NUMBER_GATEHOUSE_F at {1074.55,22.53,1197.29} radius 15
    GateHouseT22 = get SCRIPT_OBJECT_TYPE_ABODE ABODE_NUMBER_GATEHOUSE_F at {995.19,16.88,1306.21} radius 15
    
    oCreature = get player 0 creature

    if PLAYER of AztecTown1 == 1

        if not town AztecTown1 is under takeover from player 0
            PlayerPlatoonT21 = get platoon of player 0 nearest {GateHouseT21} radius 100
            CatapultT21 = get siege weapon of player 0 nearest {GateHouseT21} radius 100
            TestCreatureT21 = get distance from {GateHouseT21} to {oCreature}
            
            if PlayerPlatoonT21 exists
                EnemyNearDoorT21 = 1
            elsif CatapultT21 exists
                EnemyNearDoorT21 = 1
            elsif TestCreatureT21 < 200 and SCRIPT_OBJECT_PROPERTY_TYPE_HEALTH of oCreature > 0.00
                EnemyNearDoorT21 = 1
            else
                EnemyNearDoorT21 = 0
            end if
            
            if EnemyNearDoorT21 == 1
                set gate GateHouseT21 close
            else
                set gate GateHouseT21 open
            end if


            PlayerPlatoonT22 = get platoon of player 0 nearest {GateHouseT22} radius 100
            CatapultT22 = get siege weapon of player 0 nearest {GateHouseT22} radius 100
            TestCreatureT22 = get distance from {GateHouseT22} to {oCreature}
            
            if PlayerPlatoonT22 exists
                EnemyNearDoorT22 = 1
            elsif CatapultT22 exists
                EnemyNearDoorT22 = 1
            elsif TestCreatureT22 < 200 and SCRIPT_OBJECT_PROPERTY_TYPE_HEALTH of oCreature > 0.00
                EnemyNearDoorT22 = 1
            else
                EnemyNearDoorT22 = 0
            end if
            
            if EnemyNearDoorT22 == 1
                set gate GateHouseT22 close
            else
                set gate GateHouseT22 open
            end if
        else
            set gate GateHouseT21 open
            set gate GateHouseT22 open
        end if

    end if

    GateHouseT31 = get SCRIPT_OBJECT_TYPE_ABODE ABODE_NUMBER_GATEHOUSE_F at {1698.01,33.98,1130.03} radius 15
    GateHouseT32 = get SCRIPT_OBJECT_TYPE_ABODE ABODE_NUMBER_GATEHOUSE_F at {1943.97,24.84,874.12} radius 15
    
    oCreature = get player 0 creature

    if PLAYER of AztecTown2 == 1

        if not town AztecTown2 is under takeover from player 0
            PlayerPlatoonT31 = get platoon of player 0 nearest {GateHouseT31} radius 100
            CatapultT31 = get siege weapon of player 0 nearest {GateHouseT31} radius 100
            TestCreatureT31 = get distance from {GateHouseT31} to {oCreature}
            
            if PlayerPlatoonT31 exists
                EnemyNearDoorT31 = 1
            elsif CatapultT31 exists
                EnemyNearDoorT31 = 1
            elsif TestCreatureT31 < 200 and SCRIPT_OBJECT_PROPERTY_TYPE_HEALTH of oCreature > 0.00
                EnemyNearDoorT31 = 1
            else
                EnemyNearDoorT31 = 0
            end if
            
            if EnemyNearDoorT31 == 1
                set gate GateHouseT31 close
            else
                set gate GateHouseT31 open
            end if


            PlayerPlatoonT32 = get platoon of player 0 nearest {GateHouseT32} radius 100
            CatapultT32 = get siege weapon of player 0 nearest {GateHouseT32} radius 100
            TestCreatureT32 = get distance from {GateHouseT32} to {oCreature}
            
            if PlayerPlatoonT32 exists
                EnemyNearDoorT32 = 1
            elsif CatapultT32 exists
                EnemyNearDoorT32 = 1
            elsif TestCreatureT32 < 200 and SCRIPT_OBJECT_PROPERTY_TYPE_HEALTH of oCreature > 0.00
                EnemyNearDoorT32 = 1
            else
                EnemyNearDoorT32 = 0
            end if
            
            if EnemyNearDoorT32 == 1
                set gate GateHouseT32 close
            else
                set gate GateHouseT32 open
            end if
        else
            set gate GateHouseT31 open
            set gate GateHouseT32 open
        end if

    end if

end loop

end script LC9_GatehouseManager

begin script LC9_Speeches

    LoseDialogue1 = 0
    
    Number = 0
    
    AttackTimer = create timer for 0 seconds
    LoseTimer = create timer for 0 seconds
    
    a = 0
    b = 0
    c = 0
    d = 0
    e = 0
    f = 0
    g = 0
    h = 0
    i = 0
    j = 0
    jj = 0
    k = 0
    l = 0
    m = 0
    n = 0
    o = 0
    p = 0
    q = 0
    r = 0
    s = 0
    t = 0
    w = 0
    v = 0
    astory = 0
    bstory = 0
    
    ab = 0
    ac = 0
    ad = 0
    ae = 0
    af = 0
    ag = 0
    ah = 0
    ai = 0
    aj = 0
    ak = 0
    al = 0
    am = 0
    
    StoryDialogue = 0
    StoryDialogueTimer = create timer for 200 seconds
    
    EvilDialogue = 0
    GoodDialogue = 0
    
    Platoon = 0
    Catapult = 0

    EQ_NOT_PLAYED = 0

    AltarBuilt = 0

    TownSpeech1 = 0
    TownSpeech2 = 0
    TownSpeech3 = 0
    TownSpeech4 = 0
    TownSpeech5 = 0

    PlayerPlatoon = 0

    UnderAttackTimer = create timer for 0 seconds

    MohcComment = 0

    EarthquakePrepping = 0
    ArrivalComment = 0

    MockCreatureTimer = create timer for 180 seconds
    MockCreatureCommentSaid = 0

start

begin loop

    if MockCreatureCommentSaid == 0 and get MockCreatureTimer time remaining <= 0
        GB_DialogueIsRunning = 1
        MockCreatureCommentSaid = 1
        if variable get MyCreature sub type == variable CREATURE_TYPE_LION
            begin dialogue
                say "BW2T_SCRIPT_09FINAL_STORYLINE_AZTEC_GENERAL_MOCKS_LION"
                wait until read
            end dialogue

        elsif MyCreature == variable CREATURE_TYPE_APE or MyCreature == variable CREATURE_TYPE_GORILLA
            begin dialogue
                say "BW2T_SCRIPT_09FINAL_STORYLINE_AZTEC_GENERAL_MOCKS_APE"
                wait until read
            end dialogue

        elsif MyCreature == variable CREATURE_TYPE_WOLF
            begin dialogue
                say "BW2T_SCRIPT_09FINAL_STORYLINE_AZTEC_GENERAL_MOCKS_WOLF"
                wait until read
            end dialogue

        elsif MyCreature == variable CREATURE_TYPE_COW
            begin dialogue
                say "BW2T_SCRIPT_09FINAL_STORYLINE_AZTEC_GENERAL_MOCKS_COW"
                wait until read
            end dialogue

        end if
        GB_DialogueIsRunning = 0
    end if

    if ArrivalComment == 0
        GB_DialogueIsRunning = 1
        ArrivalComment = 1
        if alignment of player <= 0
            begin dialogue
                say "BW2T_SCRIPT_09FINAL_ADVISORS_AZTEC_ANGER_12"
                wait until read
            end dialogue
        elsif alignment of player > 0
            begin dialogue
                say "BW2T_SCRIPT_09FINAL_ADVISORS_AZTEC_ANGER_10"
                wait until read
            end dialogue
        end if
        GB_DialogueIsRunning = 0
    end if

    if LC9_Platoon[41] exists and MohcComment == 0
        GB_DialogueIsRunning = 1
        MohcComment = 1
        begin dialogue
            say "BW2T_SCRIPT_09FINAL_GENERAL_130"
            wait until read
            say "BW2T_SCRIPT_09FINAL_GENERAL_140"
            wait until read
        end dialogue
        GB_DialogueIsRunning = 0
    end if

    if LC9_Platoon[41] not exists and MohcComment == 1
        GB_DialogueIsRunning = 1
        MohcComment = 2
        begin dialogue
            say "BW2T_SCRIPT_09FINAL_GENERAL_180"
            wait until read
        end dialogue
        GB_DialogueIsRunning = 0
    end if

    if FireRainInitialized == 1
        GB_DialogueIsRunning = 1
        FireRainInitialized = 2
        begin dialogue
            say "BW2T_SCRIPT_09FINAL_ADVISORS_AZTEC_ANGER_21"
            wait until read
        end dialogue
        GB_DialogueIsRunning = 0
    end if

    if {LC9_Platoon[35]} near {PlayerTown} radius 300 or {LC9_Platoon[36]} near {PlayerTown} radius 300 or {LC9_Platoon[37]} near {PlayerTown} radius 300 or {LC9_Platoon[38]} near {PlayerTown} radius 300 or {LC9_Platoon[39]} near {PlayerTown} radius 300 or {LC9_Platoon[40]} near {PlayerTown} radius 300
        if get UnderAttackTimer time remaining <= 0
            UnderAttackTimer = create timer for 360 seconds
            GB_DialogueIsRunning = 1
            begin dialogue
                say "BW2T_SCRIPT_09FINAL_GENERAL_100"
                wait until read
            end dialogue
            GB_DialogueIsRunning = 0
        end if
    end if

    if PLAYER of MinorTown6 == 0 or get town MinorTown6 is migrating to == PlayerTown
        if TownSpeech1 == 0
            GB_DialogueIsRunning = 1
            TownSpeech1 = 1
            begin dialogue
                say "BW2T_SCRIPT_09FINAL_GENERAL_250"
                wait until read
            end dialogue
            GB_DialogueIsRunning = 0
        end if
    end if

    if PLAYER of MinorTown8 == 0
        if TownSpeech2 == 0
            GB_DialogueIsRunning = 1
            TownSpeech2 = 1
            begin dialogue
                say "BW2T_SCRIPT_09FINAL_GENERAL_10"
                wait until read
            end dialogue
            GB_DialogueIsRunning = 0
        end if
    end if

    if PLAYER of AztecTown3 == 0 or get town AztecTown3 is migrating to == PlayerTown
        if TownSpeech3 == 0
            GB_DialogueIsRunning = 1
            TownSpeech3 = 1
            begin dialogue
                say "BW2T_SCRIPT_09FINAL_GENERAL_190"
                wait until read
            end dialogue
            GB_DialogueIsRunning = 0
        end if
    end if

    PlayerPlatoon = get platoon of player 0 nearest {AztecTown1} radius 600
    if PlayerPlatoon exists and PLAYER of AztecTown1 == 1
        if TownSpeech4 == 0
            GB_DialogueIsRunning = 1
            TownSpeech4 = 1
            begin dialogue
                say "BW2T_SCRIPT_09FINAL_GENERAL_20"
                wait until read
                say "BW2T_SCRIPT_09FINAL_GENERAL_220"
                wait until read
            end dialogue
            GB_DialogueIsRunning = 0
        end if
    end if

    if PLAYER of AztecTown1 != 1
        if TownSpeech5 == 0
            GB_DialogueIsRunning = 1
            TownSpeech5 = 1
            begin dialogue
                say "BW2T_SCRIPT_09FINAL_GENERAL_30"
                wait until read
                say "BW2T_SCRIPT_09FINAL_GENERAL_40"
                wait until read
            end dialogue
            GB_DialogueIsRunning = 0
        end if
    end if

    if UnderAttack >= 1 and get AttackTimer time remaining <= 0 and GB_DialogueIsRunning == 0
        GB_DialogueIsRunning = 1
        UnderAttack = 0
        Number = number from 1 to 14
        if Number == 1
            begin dialogue
                make evil spirit appear
                say "BW2T_HELP_TEXT_GUIDANCE_BATTLE_ALERT_EA_01"
                wait until read
                send evil spirit home
            end dialogue
        end if
        if Number == 2
            begin dialogue
                make evil spirit appear
                say "BW2T_HELP_TEXT_GUIDANCE_BATTLE_ALERT_EA_02"
                wait until read
                send evil spirit home
            end dialogue
        end if
        if Number == 3
            begin dialogue
                make evil spirit appear
                say "BW2T_HELP_TEXT_GUIDANCE_BATTLE_ALERT_EA_05"
                wait until read
                send evil spirit home
            end dialogue
        end if
        if Number == 4
            begin dialogue
                make evil spirit appear
                say "BW2T_HELP_TEXT_GUIDANCE_BATTLE_ALERT_EA_06"
                wait until read
                send evil spirit home
            end dialogue
        end if
        if Number == 5
            begin dialogue
                make evil spirit appear
                say "BW2T_HELP_TEXT_GUIDANCE_BATTLE_ALERT_EA_07"
                wait until read
                send evil spirit home
            end dialogue
        end if
        if Number == 6
            begin dialogue
                make evil spirit appear
                say "BW2T_HELP_TEXT_GUIDANCE_BATTLE_ALERT_EA_08"
                wait until read
                send evil spirit home
            end dialogue
        end if
        if Number == 7
            begin dialogue
                make evil spirit appear
                say "BW2T_HELP_TEXT_GUIDANCE_BATTLE_ALERT_EA_18"
                wait until read
                send evil spirit home
            end dialogue
        end if
        if Number == 8
            begin dialogue
                make good spirit appear
                say "BW2T_HELP_TEXT_GUIDANCE_BATTLE_ALERT_GA_01"
                wait until read
                send good spirit home
            end dialogue
        end if
        if Number == 9
            begin dialogue
                make good spirit appear
                say "BW2T_HELP_TEXT_GUIDANCE_BATTLE_ALERT_GA_02"
                wait until read
                send good spirit home
            end dialogue
        end if
        if Number == 10
            begin dialogue
                make good spirit appear
                say "BW2T_HELP_TEXT_GUIDANCE_BATTLE_ALERT_GA_05"
                wait until read
                send good spirit home
            end dialogue
        end if
        if Number == 11
            begin dialogue
                make good spirit appear
                say "BW2T_HELP_TEXT_GUIDANCE_BATTLE_ALERT_GA_06"
                wait until read
                send good spirit home
            end dialogue
        end if
        if Number == 12
            begin dialogue
                make good spirit appear
                say "BW2T_HELP_TEXT_GUIDANCE_BATTLE_ALERT_GA_07"
                wait until read
                send good spirit home
            end dialogue
        end if
        if Number == 13
            begin dialogue
                make good spirit appear
                say "BW2T_HELP_TEXT_GUIDANCE_BATTLE_ALERT_GA_09"
                wait until read
                send good spirit home
            end dialogue
        end if
        if Number == 14
            begin dialogue
                make good spirit appear
                say "BW2T_HELP_TEXT_GUIDANCE_BATTLE_ALERT_GA_10"
                wait until read
                send good spirit home
            end dialogue
        end if
        GB_DialogueIsRunning = 0
        AttackTimer = create timer for 45 seconds
    end if
    
    if PLAYER of PlayerTown != 0 and PLAYER of MinorTown1 != 0 and PLAYER of MinorTown2 != 0 and PLAYER of MinorTown3 != 0 and PLAYER of MinorTown4 != 0 and PLAYER of MinorTown5 != 0 and PLAYER of MinorTown6 != 0 and PLAYER of MinorTown7 != 0 and PLAYER of MinorTown8 != 0 and PLAYER of AztecTown1 != 0 and PLAYER of AztecTown2 != 0 and PLAYER of AztecTown3 != 0 and PLAYER of AztecCapital != 0  and get LoseTimer time remaining <= 0 and GB_DialogueIsRunning == 0
        GB_DialogueIsRunning = 1
        LoseDialogue1 = number from 1 to 5
        if LoseDialogue1 == 1
            begin dialogue
                make good spirit appear
                say "BW2T_SCRIPT_GENERIC_ADVISORS_SUGGEST_RESTART_10"
                wait until read
                send good spirit home
            end dialogue
        end if
        
        if LoseDialogue1 == 2
            begin dialogue
                make evil spirit appear
                say "BW2T_SCRIPT_GENERIC_ADVISORS_SUGGEST_RESTART_20"
                wait until read
                send evil spirit home
            end dialogue
        end if
        
        if LoseDialogue1 == 3
            begin dialogue
                make good spirit appear
                say "BW2T_SCRIPT_GENERIC_ADVISORS_SUGGEST_RESTART_30"
                wait until read
                send good spirit home
            end dialogue
        end if
        
        if LoseDialogue1 == 4
            begin dialogue
                make evil spirit appear
                say "BW2T_SCRIPT_GENERIC_ADVISORS_SUGGEST_RESTART_40"
                wait until read
                send evil spirit home
            end dialogue
        end if
        
        if LoseDialogue1 == 5
            begin dialogue
                make evil spirit appear
                say "BW2T_SCRIPT_GENERIC_ADVISORS_SUGGEST_RESTART_50"
                wait until read
                send evil spirit home
            end dialogue
        end if
        
        GB_DialogueIsRunning = 0
        LoseTimer = create timer for 75 seconds
    end if

    /*
    if get building ALTAR in PlayerTown min built 0.0 exists and AltarBuilt == 0 and GB_DialogueIsRunning == 0
        GB_DialogueIsRunning = 1
        AltarBuilt = 1
        begin dialogue
            say "BW2T_SCRIPT_09FINAL_PLAYER_BUILDS_ALTAR"
            wait until read
        end dialogue
        GB_DialogueIsRunning = 0
    end if

    if get building ABODE_A in PlayerTown min built 0.0 exists and a == 0 and GB_DialogueIsRunning == 0
        GB_DialogueIsRunning = 1
        a = 1
        begin dialogue
            say "BW2T_SCRIPT_09FINAL_PLAYER_BUILDS_HUT"
            wait until read
        end dialogue
        GB_DialogueIsRunning = 0
    end if
    
    if get building ABODE_B in PlayerTown min built 0.0 exists and b == 0 and GB_DialogueIsRunning == 0
        GB_DialogueIsRunning = 1
        b = 1
        begin dialogue
            say "BW2T_SCRIPT_09FINAL_PLAYER_BUILDS_HOUSE"
            wait until read
        end dialogue
        GB_DialogueIsRunning = 0
    end if
    
    if get building ABODE_C in PlayerTown min built 0.0 exists and c == 0 and GB_DialogueIsRunning == 0
        GB_DialogueIsRunning = 1
        c = 1
        begin dialogue
            say "BW2T_SCRIPT_09FINAL_PLAYER_BUILDS_VILLA"
            wait until read
        end dialogue
        GB_DialogueIsRunning = 0
    end if
    
    if get building ABODE_D in PlayerTown min built 0.0 exists and d == 0 and GB_DialogueIsRunning == 0
        GB_DialogueIsRunning = 1
        d = 1
        begin dialogue
            say "BW2T_SCRIPT_09FINAL_PLAYER_BUILDS_MANOR"
            wait until read
        end dialogue
        GB_DialogueIsRunning = 0
    end if
    
    if get building ABODE_E in PlayerTown min built 0.0 exists and e == 0 and GB_DialogueIsRunning == 0
        GB_DialogueIsRunning = 1
        e = 1
        begin dialogue
            say "BW2T_SCRIPT_09FINAL_PLAYER_BUILDS_MANSION"
            wait until read
        end dialogue
        GB_DialogueIsRunning = 0
    end if
    
    if get building SKYSCRAPER in PlayerTown min built 0.0 exists and f == 0 and GB_DialogueIsRunning == 0
        GB_DialogueIsRunning = 1
        f = 1
        begin dialogue
            say "BW2T_SCRIPT_09FINAL_PLAYER_BUILDS_SKYSCRAPER"
            wait until read
        end dialogue
        GB_DialogueIsRunning = 0
    end if
    
    if get building STORAGE_YARD in PlayerTown min built 0.0 exists and g == 0 and GB_DialogueIsRunning == 0
        GB_DialogueIsRunning = 1
        g = 1
        begin dialogue
            say "BW2T_SCRIPT_09FINAL_PLAYER_BUILDS_STOREHOUSE"
            wait until read
        end dialogue
        GB_DialogueIsRunning = 0
    end if
    
    if get building FIELD in PlayerTown min built 0.0 exists and h == 0 and GB_DialogueIsRunning == 0
        GB_DialogueIsRunning = 1
        h = 1
        begin dialogue
            say "BW2T_SCRIPT_09FINAL_PLAYER_BUILDS_FIELD"
            wait until read
        end dialogue
        GB_DialogueIsRunning = 0
    end if
    
    if get building CREATURE_PEN in PlayerTown min built 0.0 exists and i == 0 and GB_DialogueIsRunning == 0
        GB_DialogueIsRunning = 1
        i = 1
        begin dialogue
            say "BW2T_SCRIPT_09FINAL_PLAYER_BUILDS_CREATURE_PEN"
            wait until read
        end dialogue
        GB_DialogueIsRunning = 0
    end if
    
    if (get building WALLTOWER_TECH0 in PlayerTown max built 0.9 exists or get building WALLTOWER_TECH1 in PlayerTown max built 0.9 exists) and j == 0 and GB_DialogueIsRunning == 0
        GB_DialogueIsRunning = 1
        j = 1
        begin dialogue
            say "BW2T_SCRIPT_09FINAL_PLAYER_BUILDS_FORTIFIED_WALL"
            wait until read
        end dialogue
        GB_DialogueIsRunning = 0
    end if

    if (get building GATEHOUSE in PlayerTown min built 0.0 exists or get building GATEHOUSE_F in PlayerTown min built 0.9 exists) and jj == 0 and GB_DialogueIsRunning == 0
        GB_DialogueIsRunning = 1
        jj = 1
        begin dialogue
            say "BW2T_SCRIPT_09FINAL_PLAYER_BUILDS_GATEHOUSE"
            wait until read
        end dialogue
        GB_DialogueIsRunning = 0
    end if
    
    if get building GRAVEYARD in PlayerTown min built 0.0 exists and k == 0 and GB_DialogueIsRunning == 0
        GB_DialogueIsRunning = 1
        k = 1
        begin dialogue
            say "BW2T_SCRIPT_09FINAL_PLAYER_BUILDS_GRAVEYARD"
            wait until read
        end dialogue
        GB_DialogueIsRunning = 0
    end if
    
    if get building PUB in PlayerTown min built 0.0 exists and l == 0 and GB_DialogueIsRunning == 0
        GB_DialogueIsRunning = 1
        l = 1
        begin dialogue
            say "BW2T_SCRIPT_09FINAL_PLAYER_BUILDS_TAVERN"
            wait until read
        end dialogue
        GB_DialogueIsRunning = 0
    end if
    
    if get building UNIVERSITY in PlayerTown min built 0.0 exists and n == 0 and GB_DialogueIsRunning == 0
        GB_DialogueIsRunning = 1
        n = 1
        begin dialogue
            say "BW2T_SCRIPT_09FINAL_PLAYER_BUILDS_UNIVERSITY"
            wait until read
        end dialogue
        GB_DialogueIsRunning = 0
    end if
    
    if get building OLD_PERSONS_HOME in PlayerTown min built 0.0 exists and o == 0 and GB_DialogueIsRunning == 0
        GB_DialogueIsRunning = 1
        o = 1
        begin dialogue
            say "BW2T_SCRIPT_09FINAL_PLAYER_BUILDS_REST_HOME"
            wait until read
        end dialogue
        GB_DialogueIsRunning = 0
    end if
    
    if get building TEMPLE in PlayerTown min built 0.0 exists and p == 0 and GB_DialogueIsRunning == 0
        GB_DialogueIsRunning = 1
        p = 1
        begin dialogue
            say "BW2T_SCRIPT_09FINAL_PLAYER_BUILDS_TEMPLE"
            wait until read
        end dialogue
        GB_DialogueIsRunning = 0
    end if
    
    if get building LUMBERMILL in PlayerTown min built 0.0 exists and q == 0 and GB_DialogueIsRunning == 0
        GB_DialogueIsRunning = 1
        q = 1
        begin dialogue
            say "BW2T_SCRIPT_09FINAL_PLAYER_BUILDS_LUMBER_MILL"
            wait until read
        end dialogue
        GB_DialogueIsRunning = 0
    end if
    
    if get building SMELTER in PlayerTown min built 0.0 exists and r == 0 and GB_DialogueIsRunning == 0
        GB_DialogueIsRunning = 1
        r = 1
        begin dialogue
            say "BW2T_SCRIPT_09FINAL_PLAYER_BUILDS_SMELTER"
            wait until read
        end dialogue
        GB_DialogueIsRunning = 0
    end if
    
    if get building GRANARY in PlayerTown min built 0.0 exists and s == 0 and GB_DialogueIsRunning == 0
        GB_DialogueIsRunning = 1
        s = 1
        begin dialogue
            say "BW2T_SCRIPT_09FINAL_PLAYER_BUILDS_GRANARY"
            wait until read
        end dialogue
        GB_DialogueIsRunning = 0
    end if
    
    if get building BATHHOUSE in PlayerTown min built 0.0 exists and t == 0 and GB_DialogueIsRunning == 0
        GB_DialogueIsRunning = 1
        t = 1
        begin dialogue
            say "BW2T_SCRIPT_09FINAL_PLAYER_BUILDS_BATHS"
            wait until read
        end dialogue
        GB_DialogueIsRunning = 0
    end if
    
    if get building AMPITHEATRE in PlayerTown min built 0.0 exists and w == 0 and GB_DialogueIsRunning == 0
        GB_DialogueIsRunning = 1
        w = 1
        begin dialogue
            say "BW2T_SCRIPT_09FINAL_PLAYER_BUILDS_AMPHITHEATRE"
            wait until read
        end dialogue
        GB_DialogueIsRunning = 0
    end if

    if get building PRISON in PlayerTown min built 0.0 exists and v == 0 and GB_DialogueIsRunning == 0
        GB_DialogueIsRunning = 1
        v = 1
        begin dialogue
            say "BW2T_SCRIPT_09FINAL_PLAYER_BUILDS_PRISON"
            wait until read
        end dialogue
        GB_DialogueIsRunning = 0
    end if
    */
    
    if TownsConverted >= 2 and GoodDialogue == 0
        GB_DialogueIsRunning = 1
        GoodDialogue = 1
        begin dialogue
            say "BW2T_SCRIPT_09FINAL_GENERAL_240"
            wait until read
        end dialogue
        GB_DialogueIsRunning = 0
    end if
    
    if TownsConverted >= 4 and GoodDialogue == 1
        GB_DialogueIsRunning = 1
        GoodDialogue = 2
        begin dialogue
            say "BW2T_SCRIPT_09FINAL_GENERAL_50"
            wait until read
        end dialogue
        GB_DialogueIsRunning = 0
    end if

    if TownsConverted >= 3 or TownsAggressiveConverted >= 1
        if EarthquakePrepping == 0
            EarthquakePrepping = 1
            GB_DialogueIsRunning = 1
            begin dialogue
                say "BW2T_SCRIPT_10FINAL_EARTHQUAKE_30"
                wait until read
            end dialogue
            GB_DialogueIsRunning = 0
        end if
    end if

    if EarthquakeFired == 1 and EQ_NOT_PLAYED == 0
        GB_DialogueIsRunning = 1
        EQ_NOT_PLAYED = 1
        begin dialogue
            say "BW2T_SCRIPT_09FINAL_EPIC_EARTHQUAKE_READY"
            wait until read
        end dialogue
        GB_DialogueIsRunning = 0
    end if

end loop

end script LC9_Speeches

begin script LC9_Aztec_Capital
    
    a = 0

    Wall[17]

    Number = 0

    AttackingPlatoons = 0

    NearestSettlementTownCentre = 0

    PlayerPlatoon = 0

    EarthquakeWarning = 0
    EpicEart = 0
    CastEpicPos = 0

    PlannedWall[8]
    PlannedWallPos[8]

    WallTimer = create timer for 720 * BuilderModifier seconds
    
    WallCounter = 0

    StartPosition = 0
    FireRainFirstTime = 1

    FireRainTimer = create timer for 0 seconds

    EarthquakeFirstTime = 0
    EarthquakeTimer = create timer for 99999 seconds
    EARTHQUAKEDELAY = 2000

    FristAttackTimer = create timer for 300 seconds
    MohcBuilt = 0

    LARGEATTACKTHRES = 9
    THRESHOLD1 = 0
    THRESHOLD2 = 0
    THRESHOLD3 = 0

start

    AttackNearestTownTimer = create timer for 0 seconds

    WonderTemple = get building BATHHOUSE in AztecTown1 min built 1.0
    AIEarthquake = get SCRIPT_OBJECT_TYPE_WONDER EPIC_WONDER_NUMBER_EARTHQUAKE at {1359.12,83.50,811.24} radius 150
    LargeAttackTimer = create timer for 1400 seconds

    LC9_RecruitTimer1 = create timer for 60 seconds
    LC9_RecruitTimer2 = create timer for 60 seconds
    LC9_RecruitTimer3 = create timer for 60 seconds
    LC9_RecruitTimer4 = create timer for 60 seconds

    //AztecCapital Walls
    Wall[0] = get wall segment nearest {298.18,223.25,1825.09} radius 15
    Wall[1] = get wall segment nearest {344.13,224.33,1884.89} radius 15
    Wall[2] = get wall segment nearest {519.91,159.32,1872.18} radius 15 //Planned
    Wall[3] = get wall segment nearest {566.41,160.07,1829.01} radius 15 //Planned
    Wall[4] = get wall segment nearest {275.62,156.85,1549.18} radius 15 //Planned
    Wall[5] = get wall segment nearest {344.49,157.18,1551.02} radius 15 //Planned
    Wall[6] = get wall segment nearest {890.37,21.45,770.19} radius 15
    Wall[7] = get wall segment nearest {979.00,21.78,772.60} radius 15

    PlannedWallPos[0] = marker at {254.28,157.81,1542.79}
    PlannedWallPos[1] = marker at {291.95,157.06,1546.81}
    PlannedWallPos[2] = marker at {325.51,157.15,1548.81}
    PlannedWallPos[3] = marker at {366.84,157.93,1553.95}
    PlannedWallPos[4] = marker at {576.50,160.78,1821.26}
    PlannedWallPos[5] = marker at {558.32,158.47,1838.99}
    PlannedWallPos[6] = marker at {530.77,158.44,1862.37}
    PlannedWallPos[7] = marker at {505.80,161.65,1885.12}

    //AztecTown1 Walls
    Wall[8] = get wall segment nearest {1047.17,22.49,1182.66} radius 15
    Wall[9] = get wall segment nearest {1093.67,22.53,1216.39} radius 15
    Wall[10] = get wall segment nearest {1020.97,16.81,1325.09} radius 15
    Wall[11] = get wall segment nearest {965.63,16.89,1288.06} radius 15

    //AztecTown2 Walls
    Wall[12] = get wall segment nearest {1961.92,24.74,873.10} radius 15
    Wall[13] = get wall segment nearest {1912.27,25.11,867.28} radius 15
    Wall[14] = get wall segment nearest {1611.74,81.18,974.73} radius 15
    Wall[15] = get wall segment nearest {1678.22,34.97,1088.96} radius 15
    Wall[16] = get wall segment nearest {1721.83,32.78,1163.44} radius 15

    if Difficulty >= 4
        add resource WOOD 4000 to PlayerTown
        add resource ORE 4000 to PlayerTown
        add resource FOOD 2500 to PlayerTown
    elsif Difficulty == 3
        add resource WOOD 6000 to PlayerTown
        add resource ORE 6000 to PlayerTown
        add resource FOOD 4000 to PlayerTown
    elsif Difficulty == 2
        add resource WOOD 8000 to PlayerTown
        add resource ORE 8000 to PlayerTown
        add resource FOOD 6000 to PlayerTown
    elsif Difficulty == 1
        add resource WOOD 10000 to PlayerTown
        add resource ORE 10000 to PlayerTown
        add resource FOOD 7500 to PlayerTown
    end if

    add resource WOOD 500 to MinorTown1
    add resource ORE 500 to MinorTown1
    add resource FOOD 1000 to MinorTown1

    add resource WOOD 2000 to MinorTown5
    add resource ORE 0 to MinorTown5
    add resource FOOD 2000 to MinorTown5

    add resource WOOD 2000 to MinorTown5
    add resource ORE 500 to MinorTown5
    add resource FOOD 2000 to MinorTown5

    //----Create town static defenders platoons----//

    //--AztecCapital--//
    LC9_Platoon[0] = create platoon PLATOON_INFO_AZTEC_RANGED_5 at {PlatoonPos[0]} with 25 * RecruitSizeModifier men and 0 women
    attach LC9_Platoon[0] to AztecCapital
    PLAYER of LC9_Platoon[0] = 1
    enable platoon LC9_Platoon[0] respond to town AztecCapital attack
    enable platoon LC9_Platoon[0] camp
    set LC9_Platoon[0] focus to {MinorTown8}
    run background script LC9_StaticPlatoonsActions(PlatoonPos[0],Ranged,LC9_Platoon[0])

    LC9_Platoon[1] = create platoon PLATOON_INFO_AZTEC_RANGED_5 at {PlatoonPos[1]} with 25 * RecruitSizeModifier men and 0 women
    attach LC9_Platoon[1] to AztecCapital
    PLAYER of LC9_Platoon[1] = 1
    enable platoon LC9_Platoon[1] respond to town AztecCapital attack
    enable platoon LC9_Platoon[1] camp
    set LC9_Platoon[1] focus to {MinorTown8}
    run background script LC9_StaticPlatoonsActions(PlatoonPos[1],Ranged,LC9_Platoon[1])

    LC9_Platoon[2] = create platoon PLATOON_INFO_AZTEC_MELEE_5 at {PlatoonPos[2]} with 30 * RecruitSizeModifier men and 0 women
    attach LC9_Platoon[2] to AztecCapital
    PLAYER of LC9_Platoon[2] = 1
    enable platoon LC9_Platoon[2] respond to town AztecCapital attack
    enable platoon LC9_Platoon[2] camp
    set LC9_Platoon[2] focus to {PlayerTown}
    run background script LC9_StaticPlatoonsActions(PlatoonPos[2],Melee,LC9_Platoon[2])

    LC9_Platoon[3] = create platoon PLATOON_INFO_AZTEC_MELEE_5 at {PlatoonPos[3]} with 30 * RecruitSizeModifier men and 0 women
    attach LC9_Platoon[3] to AztecCapital
    PLAYER of LC9_Platoon[3] = 1
    enable platoon LC9_Platoon[3] respond to town AztecCapital attack
    enable platoon LC9_Platoon[3] camp
    set LC9_Platoon[3] focus to {PlayerTown}
    run background script LC9_StaticPlatoonsActions(PlatoonPos[3],Melee,LC9_Platoon[3])

    LC9_Platoon[4] = create platoon PLATOON_INFO_AZTEC_MELEE_5 at {PlatoonPos[4]} with 20 * RecruitSizeModifier men and 0 women
    attach LC9_Platoon[4] to AztecCapital
    PLAYER of LC9_Platoon[4] = 1
    enable platoon LC9_Platoon[4] respond to town AztecCapital attack
    enable platoon LC9_Platoon[4] camp
    set LC9_Platoon[4] focus to {PlayerTown}
    run background script LC9_StaticPlatoonsActions(PlatoonPos[4],Melee,LC9_Platoon[4])

    LC9_Platoon[5] = create platoon PLATOON_INFO_AZTEC_MELEE_5 at {PlatoonPos[5]} with 20 * RecruitSizeModifier men and 0 women
    attach LC9_Platoon[5] to AztecCapital
    PLAYER of LC9_Platoon[5] = 1
    enable platoon LC9_Platoon[5] respond to town AztecCapital attack
    enable platoon LC9_Platoon[5] camp
    set LC9_Platoon[5] focus to {PlayerTown}
    run background script LC9_StaticPlatoonsActions(PlatoonPos[5],Melee,LC9_Platoon[5])

    LC9_Platoon[6] = create platoon PLATOON_INFO_AZTEC_MELEE_5 at {PlatoonPos[6]} with 30 * RecruitSizeModifier men and 0 women
    attach LC9_Platoon[6] to AztecCapital
    PLAYER of LC9_Platoon[6] = 1
    enable platoon LC9_Platoon[6] respond to town AztecCapital attack
    enable platoon LC9_Platoon[6] camp
    set LC9_Platoon[6] focus to {MinorTown6}
    run background script LC9_StaticPlatoonsActions(PlatoonPos[6],Melee,LC9_Platoon[6])

    LC9_Platoon[7] = create platoon PLATOON_INFO_AZTEC_MELEE_5 at {PlatoonPos[7]} with 20 * RecruitSizeModifier men and 0 women
    attach LC9_Platoon[7] to AztecCapital
    PLAYER of LC9_Platoon[7] = 1
    enable platoon LC9_Platoon[7] respond to town AztecCapital attack
    enable platoon LC9_Platoon[7] camp
    set LC9_Platoon[7] focus to {PlayerTown}
    run background script LC9_StaticPlatoonsActions(PlatoonPos[7],Melee,LC9_Platoon[7])

    LC9_Platoon[8] = create platoon PLATOON_INFO_AZTEC_RANGED_5 at {PlatoonPos[8]} with 20 * RecruitSizeModifier men and 0 women
    attach LC9_Platoon[8] to AztecCapital
    PLAYER of LC9_Platoon[8] = 1
    enable platoon LC9_Platoon[8] respond to town AztecCapital attack
    enable platoon LC9_Platoon[8] camp
    set LC9_Platoon[8] focus to {PlayerTown}
    run background script LC9_StaticPlatoonsActions(PlatoonPos[8],Ranged,LC9_Platoon[8])

    //AztecTown1
    LC9_Platoon[9] = create platoon PLATOON_INFO_AZTEC_MELEE_4 at {PlatoonPos[9]} with 20 * RecruitSizeModifier men and 0 women
    attach LC9_Platoon[9] to AztecTown1
    PLAYER of LC9_Platoon[9] = 1
    enable platoon LC9_Platoon[9] respond to town AztecTown1 attack
    enable platoon LC9_Platoon[9] camp
    set LC9_Platoon[9] focus to {PlayerTown}
    run background script LC9_StaticPlatoonsActions(PlatoonPos[9],Melee,LC9_Platoon[9])

    LC9_Platoon[10] = create platoon PLATOON_INFO_AZTEC_MELEE_4 at {PlatoonPos[10]} with 20 * RecruitSizeModifier men and 0 women
    attach LC9_Platoon[10] to AztecTown1
    PLAYER of LC9_Platoon[10] = 1
    enable platoon LC9_Platoon[10] respond to town AztecTown1 attack
    enable platoon LC9_Platoon[10] camp
    set LC9_Platoon[10] focus to {PlayerTown}
    run background script LC9_StaticPlatoonsActions(PlatoonPos[10],Melee,LC9_Platoon[10])

    LC9_Platoon[11] = create platoon PLATOON_INFO_AZTEC_RANGED_4 at {PlatoonPos[11]} with 20 * RecruitSizeModifier men and 0 women
    attach LC9_Platoon[11] to AztecTown1
    PLAYER of LC9_Platoon[11] = 1
    enable platoon LC9_Platoon[11] respond to town AztecTown1 attack
    enable platoon LC9_Platoon[11] camp
    set LC9_Platoon[11] focus to {PlayerTown}
    run background script LC9_StaticPlatoonsActions(PlatoonPos[11],Ranged,LC9_Platoon[11])

    LC9_Platoon[12] = create platoon PLATOON_INFO_AZTEC_RANGED_4 at {PlatoonPos[12]} with 20 * RecruitSizeModifier men and 0 women
    attach LC9_Platoon[12] to AztecTown1
    PLAYER of LC9_Platoon[12] = 1
    enable platoon LC9_Platoon[12] respond to town AztecTown1 attack
    enable platoon LC9_Platoon[12] camp
    set LC9_Platoon[12] focus to {PlayerTown}
    run background script LC9_StaticPlatoonsActions(PlatoonPos[12],Ranged,LC9_Platoon[12])

    //AztecTown2

    LC9_Platoon[13] = create platoon PLATOON_INFO_AZTEC_MELEE_4 at {PlatoonPos[13]} with 20 * RecruitSizeModifier men and 0 women
    attach LC9_Platoon[13] to AztecTown2
    PLAYER of LC9_Platoon[13] = 1
    enable platoon LC9_Platoon[13] respond to town AztecTown2 attack
    enable platoon LC9_Platoon[13] camp
    set LC9_Platoon[13] focus to {PlayerTown}
    run background script LC9_StaticPlatoonsActions(PlatoonPos[13],Melee,LC9_Platoon[13])

    LC9_Platoon[14] = create platoon PLATOON_INFO_AZTEC_RANGED_4 at {PlatoonPos[14]} with 20 * RecruitSizeModifier men and 0 women
    attach LC9_Platoon[14] to AztecTown2
    PLAYER of LC9_Platoon[14] = 1
    enable platoon LC9_Platoon[14] respond to town AztecTown2 attack
    enable platoon LC9_Platoon[14] camp
    set LC9_Platoon[14] focus to {PlayerTown}
    run background script LC9_StaticPlatoonsActions(PlatoonPos[14],Ranged,LC9_Platoon[14])

    LC9_Platoon[15] = create platoon PLATOON_INFO_AZTEC_MELEE_4 at {PlatoonPos[15]} with 25 * RecruitSizeModifier men and 0 women
    attach LC9_Platoon[15] to AztecTown2
    PLAYER of LC9_Platoon[15] = 1
    enable platoon LC9_Platoon[15] respond to town AztecTown2 attack
    enable platoon LC9_Platoon[15] camp
    set LC9_Platoon[15] focus to {PlayerTown}
    run background script LC9_StaticPlatoonsActions(PlatoonPos[15],Melee,LC9_Platoon[15])

    LC9_Platoon[16] = create platoon PLATOON_INFO_AZTEC_MELEE_4 at {PlatoonPos[16]} with 25 * RecruitSizeModifier men and 0 women
    attach LC9_Platoon[16] to AztecTown2
    PLAYER of LC9_Platoon[16] = 1
    enable platoon LC9_Platoon[16] respond to town AztecTown2 attack
    enable platoon LC9_Platoon[16] camp
    set LC9_Platoon[16] focus to {PlayerTown}
    run background script LC9_StaticPlatoonsActions(PlatoonPos[16],Melee,LC9_Platoon[16])

    LC9_Platoon[17] = create platoon PLATOON_INFO_AZTEC_MELEE_4 at {PlatoonPos[17]} with 25 * RecruitSizeModifier men and 0 women
    attach LC9_Platoon[17] to AztecTown2
    PLAYER of LC9_Platoon[17] = 1
    enable platoon LC9_Platoon[17] respond to town AztecTown2 attack
    enable platoon LC9_Platoon[17] camp
    set LC9_Platoon[17] focus to {PlayerTown}
    run background script LC9_StaticPlatoonsActions(PlatoonPos[17],Melee,LC9_Platoon[17])

    //AztecTown3

    LC9_Platoon[18] = create platoon PLATOON_INFO_AZTEC_MELEE_4 at {PlatoonPos[18]} with 20 * RecruitSizeModifier men and 0 women
    attach LC9_Platoon[18] to AztecTown3
    PLAYER of LC9_Platoon[18] = 1
    enable platoon LC9_Platoon[18] respond to town AztecTown3 attack
    enable platoon LC9_Platoon[18] camp
    set LC9_Platoon[18] focus to {PlayerTown}
    run background script LC9_StaticPlatoonsActions(PlatoonPos[18],Melee,LC9_Platoon[18])

    LC9_Platoon[19] = create platoon PLATOON_INFO_AZTEC_RANGED_4 at {PlatoonPos[19]} with 20 * RecruitSizeModifier men and 0 women
    attach LC9_Platoon[19] to AztecTown3
    PLAYER of LC9_Platoon[19] = 1
    enable platoon LC9_Platoon[19] respond to town AztecTown3 attack
    enable platoon LC9_Platoon[19] camp
    set LC9_Platoon[19] focus to {PlayerTown}
    run background script LC9_StaticPlatoonsActions(PlatoonPos[19],Ranged,LC9_Platoon[19])

    //Epic Guards

    LC9_Platoon[22] = create platoon PLATOON_INFO_AZTEC_MELEE_4 at {PlatoonPos[20]} with 30 * RecruitSizeModifier men and 0 women
    attach LC9_Platoon[22] to AztecCapital
    PLAYER of LC9_Platoon[22] = 1
    enable platoon LC9_Platoon[22] respond to town AztecCapital attack
    enable platoon LC9_Platoon[22] camp
    set LC9_Platoon[22] focus to {PlayerTown}
    run background script LC9_StaticPlatoonsActions(PlatoonPos[20],Melee,LC9_Platoon[22])

    LC9_Platoon[23] = create platoon PLATOON_INFO_AZTEC_RANGED_4 at {PlatoonPos[21]} with 30 * RecruitSizeModifier men and 0 women
    attach LC9_Platoon[23] to AztecCapital
    PLAYER of LC9_Platoon[23] = 1
    enable platoon LC9_Platoon[23] respond to town AztecCapital attack
    enable platoon LC9_Platoon[23] camp
    set LC9_Platoon[23] focus to {PlayerTown}
    run background script LC9_StaticPlatoonsActions(PlatoonPos[21],Ranged,LC9_Platoon[23])

    //----Create patrol platoons----//
    LC9_Platoon[20] = create platoon PLATOON_INFO_AZTEC_MELEE_4 at {PatrolRouteA[0]} with 25 * RecruitSizeModifier men and 0 women
    attach LC9_Platoon[20] to AztecCapital
    PLAYER of LC9_Platoon[20] = 1
    run background script LC9_Platoon20Actions
    enable platoon LC9_Platoon[20] respond to town AztecCapital attack
    enable platoon LC9_Platoon[20] respond to town AztecTown1 attack
    enable platoon LC9_Platoon[20] respond to town AztecTown2 attack
    enable platoon LC9_Platoon[20] respond to town AztecTown3 attack

    LC9_Platoon[21] = create platoon PLATOON_INFO_AZTEC_MELEE_4 at {PatrolRouteB[0]} with 75 * RecruitSizeModifier men and 0 women
    attach LC9_Platoon[21] to AztecCapital
    PLAYER of LC9_Platoon[21] = 1
    run background script LC9_Platoon21Actions
    enable platoon LC9_Platoon[21] respond to town AztecCapital attack

    //----Create town archer platoons----//
    LC9_WallArcher[0] = create platoon PLATOON_INFO_AZTEC_RANGED_4 at {Wall[0]} with 20 * RecruitSizeModifier men and 0 women
    attach LC9_WallArcher[0] to AztecCapital
    PLAYER of LC9_WallArcher[0] = 1
    enable platoon LC9_WallArcher[0] respond to town AztecCapital attack
    add action PLATOON_AGENDA_ACTION_GET_ON_WALL using Wall[0] to LC9_WallArcher[0] action queue

    LC9_WallArcher[1] = create platoon PLATOON_INFO_AZTEC_RANGED_4 at {Wall[1]} with 20 * RecruitSizeModifier men and 0 women
    attach LC9_WallArcher[1] to AztecCapital
    PLAYER of LC9_WallArcher[1] = 1
    enable platoon LC9_WallArcher[1] respond to town AztecCapital attack
    add action PLATOON_AGENDA_ACTION_GET_ON_WALL using Wall[1] to LC9_WallArcher[1] action queue

    LC9_WallArcher[6] = create platoon PLATOON_INFO_AZTEC_RANGED_4 at {Wall[6]} with 20 * RecruitSizeModifier men and 0 women
    attach LC9_WallArcher[6] to AztecCapital
    PLAYER of LC9_WallArcher[6] = 1
    enable platoon LC9_WallArcher[6] respond to town AztecCapital attack
    add action PLATOON_AGENDA_ACTION_GET_ON_WALL using Wall[6] to LC9_WallArcher[6] action queue

    LC9_WallArcher[7] = create platoon PLATOON_INFO_AZTEC_RANGED_4 at {Wall[7]} with 20 * RecruitSizeModifier men and 0 women
    attach LC9_WallArcher[7] to AztecCapital
    PLAYER of LC9_WallArcher[7] = 1
    enable platoon LC9_WallArcher[7] respond to town AztecCapital attack
    add action PLATOON_AGENDA_ACTION_GET_ON_WALL using Wall[7] to LC9_WallArcher[7] action queue

    LC9_WallArcher[8] = create platoon PLATOON_INFO_AZTEC_RANGED_4 at {Wall[8]} with 20 * RecruitSizeModifier men and 0 women
    attach LC9_WallArcher[8] to AztecTown1
    PLAYER of LC9_WallArcher[8] = 1
    enable platoon LC9_WallArcher[8] respond to town AztecTown1 attack
    add action PLATOON_AGENDA_ACTION_GET_ON_WALL using Wall[8] to LC9_WallArcher[8] action queue

    LC9_WallArcher[9] = create platoon PLATOON_INFO_AZTEC_RANGED_4 at {Wall[9]} with 20 * RecruitSizeModifier men and 0 women
    attach LC9_WallArcher[9] to AztecTown1
    PLAYER of LC9_WallArcher[9] = 1
    enable platoon LC9_WallArcher[9] respond to town AztecTown1 attack
    add action PLATOON_AGENDA_ACTION_GET_ON_WALL using Wall[9] to LC9_WallArcher[9] action queue

    LC9_WallArcher[10] = create platoon PLATOON_INFO_AZTEC_RANGED_4 at {Wall[10]} with 20 * RecruitSizeModifier men and 0 women
    attach LC9_WallArcher[10] to AztecTown1
    PLAYER of LC9_WallArcher[10] = 1
    enable platoon LC9_WallArcher[10] respond to town AztecTown1 attack
    add action PLATOON_AGENDA_ACTION_GET_ON_WALL using Wall[10] to LC9_WallArcher[10] action queue

    LC9_WallArcher[11] = create platoon PLATOON_INFO_AZTEC_RANGED_4 at {Wall[11]} with 20 * RecruitSizeModifier men and 0 women
    attach LC9_WallArcher[11] to AztecTown1
    PLAYER of LC9_WallArcher[11] = 1
    enable platoon LC9_WallArcher[11] respond to town AztecTown1 attack
    add action PLATOON_AGENDA_ACTION_GET_ON_WALL using Wall[11] to LC9_WallArcher[11] action queue

    LC9_WallArcher[12] = create platoon PLATOON_INFO_AZTEC_RANGED_4 at {Wall[12]} with 20 * RecruitSizeModifier men and 0 women
    attach LC9_WallArcher[12] to AztecTown2
    PLAYER of LC9_WallArcher[12] = 1
    enable platoon LC9_WallArcher[12] respond to town AztecTown2 attack
    add action PLATOON_AGENDA_ACTION_GET_ON_WALL using Wall[12] to LC9_WallArcher[12] action queue

    LC9_WallArcher[13] = create platoon PLATOON_INFO_AZTEC_RANGED_4 at {Wall[13]} with 20 * RecruitSizeModifier men and 0 women
    attach LC9_WallArcher[13] to AztecTown2
    PLAYER of LC9_WallArcher[13] = 1
    enable platoon LC9_WallArcher[13] respond to town AztecTown2 attack
    add action PLATOON_AGENDA_ACTION_GET_ON_WALL using Wall[13] to LC9_WallArcher[13] action queue

    LC9_WallArcher[14] = create platoon PLATOON_INFO_AZTEC_RANGED_4 at {Wall[14]} with 20 * RecruitSizeModifier men and 0 women
    attach LC9_WallArcher[14] to AztecTown2
    PLAYER of LC9_WallArcher[14] = 1
    enable platoon LC9_WallArcher[14] respond to town AztecTown2 attack
    add action PLATOON_AGENDA_ACTION_GET_ON_WALL using Wall[14] to LC9_WallArcher[14] action queue

    LC9_WallArcher[15] = create platoon PLATOON_INFO_AZTEC_RANGED_4 at {Wall[15]} with 20 * RecruitSizeModifier men and 0 women
    attach LC9_WallArcher[15] to AztecTown2
    PLAYER of LC9_WallArcher[15] = 1
    enable platoon LC9_WallArcher[15] respond to town AztecTown2 attack
    add action PLATOON_AGENDA_ACTION_GET_ON_WALL using Wall[15] to LC9_WallArcher[15] action queue

    LC9_WallArcher[16] = create platoon PLATOON_INFO_AZTEC_RANGED_4 at {Wall[16]} with 20 * RecruitSizeModifier men and 0 women
    attach LC9_WallArcher[16] to AztecTown2
    PLAYER of LC9_WallArcher[16] = 1
    enable platoon LC9_WallArcher[16] respond to town AztecTown2 attack
    add action PLATOON_AGENDA_ACTION_GET_ON_WALL using Wall[16] to LC9_WallArcher[16] action queue

    //----Create static Siege Weapons----//
    LC9_SiegeCatapult[0] = create siege weapon SIEGE_BALANCE_TYPE_CATAPULT_LEVEL_4 belonging to AztecCapital at {StaticSiegePos[0]}
    set LC9_SiegeCatapult[0] focus to {PlayerTown}
    add action SIEGEWEAPON_AGENDA_ACTION_DEFEND_POSITION using {StaticSiegePos[0]} to siege weapon LC9_SiegeCatapult[0] action queue

    LC9_SiegeCatapult[1] = create siege weapon SIEGE_BALANCE_TYPE_CATAPULT_LEVEL_4 belonging to AztecCapital at {StaticSiegePos[1]}
    set LC9_SiegeCatapult[1] focus to {PlayerTown}
    add action SIEGEWEAPON_AGENDA_ACTION_DEFEND_POSITION using {StaticSiegePos[1]} to siege weapon LC9_SiegeCatapult[1] action queue

    LC9_SiegeCatapult[2] = create siege weapon SIEGE_BALANCE_TYPE_CATAPULT_LEVEL_4 belonging to AztecCapital at {StaticSiegePos[2]}
    set LC9_SiegeCatapult[2] focus to {PlayerTown}
    add action SIEGEWEAPON_AGENDA_ACTION_DEFEND_POSITION using {StaticSiegePos[2]} to siege weapon LC9_SiegeCatapult[2] action queue

    LC9_SiegeCatapult[3] = create siege weapon SIEGE_BALANCE_TYPE_CATAPULT_LEVEL_4 belonging to AztecCapital at {StaticSiegePos[3]}
    set LC9_SiegeCatapult[3] focus to {PlayerTown}
    add action SIEGEWEAPON_AGENDA_ACTION_DEFEND_POSITION using {StaticSiegePos[3]} to siege weapon LC9_SiegeCatapult[3] action queue

    LC9_SiegeCatapult[4] = create siege weapon SIEGE_BALANCE_TYPE_CATAPULT_LEVEL_4 belonging to AztecCapital at {StaticSiegePos[4]}
    set LC9_SiegeCatapult[4] focus to {PlayerTown}
    add action SIEGEWEAPON_AGENDA_ACTION_DEFEND_POSITION using {StaticSiegePos[4]} to siege weapon LC9_SiegeCatapult[4] action queue

    wait until IntroFinished == 1

    run background script LC9_Platoon32Actions
    run background script LC9_Platoon33Actions
    run background script LC9_Platoon34Actions
    run background script LC9_Platoon35Actions
    run background script LC9_Platoon36Actions
    run background script LC9_Platoon37Actions
    run background script LC9_Platoon38Actions
    run background script LC9_Platoon39Actions
    run background script LC9_Platoon40Actions
    run background script LC9_SiegeCatapult5Actions
    run background script LC9_SiegeCatapult6Actions
    run background script LC9_SiegeCatapult7Actions
    run background script LC9_SiegeCatapult8Actions
    run background script LC9_SiegeCatapult9Actions
    run background script LC9_SiegeCatapult10Actions
    run background script LC9_SiegeCatapult11Actions
    run background script LC9_SiegeCatapult12Actions
    run background script LC9_SiegeCatapult13Actions
    run background script LC9_Platoon41Actions
    run background script LC9_Platoon42Actions
    run background script LC9_Platoon43Actions
    run background script LC9_Platoon44Actions
    run background script LC9_SiegeCatapult14Actions
    run background script LC9_SiegeCatapult15Actions

    begin loop

        //AztecCapital Walls
        Wall[0] = get wall segment nearest {298.18,223.25,1825.09} radius 15
        Wall[1] = get wall segment nearest {344.13,224.33,1884.89} radius 15
        Wall[2] = get wall segment nearest {519.91,159.32,1872.18} radius 15 //Planned
        Wall[3] = get wall segment nearest {566.41,160.07,1829.01} radius 15 //Planned
        Wall[4] = get wall segment nearest {275.62,156.85,1549.18} radius 15 //Planned
        Wall[5] = get wall segment nearest {344.49,157.18,1551.02} radius 15 //Planned
        Wall[6] = get wall segment nearest {890.37,21.45,770.19} radius 15
        Wall[7] = get wall segment nearest {979.00,21.78,772.60} radius 15

        //AztecTown1 Walls
        Wall[8] = get wall segment nearest {1047.17,22.49,1182.66} radius 15
        Wall[9] = get wall segment nearest {1093.67,22.53,1216.39} radius 15
        Wall[10] = get wall segment nearest {1020.97,16.81,1325.09} radius 15
        Wall[11] = get wall segment nearest {965.63,16.89,1288.06} radius 15

        //AztecTown2 Walls
        Wall[12] = get wall segment nearest {1961.92,24.74,873.10} radius 15
        Wall[13] = get wall segment nearest {1912.27,25.11,867.28} radius 15
        Wall[14] = get wall segment nearest {1611.74,81.18,974.73} radius 15
        Wall[15] = get wall segment nearest {1678.22,34.97,1088.96} radius 15
        Wall[16] = get wall segment nearest {1721.83,32.78,1163.44} radius 15

        NearestSettlementTownCentre = get building ABODE_NUMBER_TOWN_CENTRE in NearestSettlement min built 1.0
        if LC9_Platoon[0] not exists and PLAYER of AztecCapital == 1 and not town AztecCapital is under takeover from player 0 and get LC9_RecruitTimer1 time remaining <= 0
            LC9_Platoon[0] = recruit ARMY_UNIT_TYPE_RANGED_4 town AztecCapital platoon of size 20 * RecruitSizeModifier
            LC9_RecruitTimer1 = create timer for 180 * RecruitModifier seconds
            enable platoon LC9_Platoon[0] respond to town AztecCapital attack
            wait until not LC9_Platoon[0] recruiting
            run background script LC9_StaticPlatoonsActions(PlatoonPos[0],Ranged,LC9_Platoon[0])

        elsif LC9_Platoon[1] not exists and PLAYER of AztecCapital == 1 and not town AztecCapital is under takeover from player 0 and get LC9_RecruitTimer1 time remaining <= 0
            LC9_Platoon[1] = recruit ARMY_UNIT_TYPE_RANGED_4 town AztecCapital platoon of size 20 * RecruitSizeModifier
            LC9_RecruitTimer1 = create timer for 180 * RecruitModifier seconds
            enable platoon LC9_Platoon[1] respond to town AztecCapital attack
            wait until not LC9_Platoon[1] recruiting
            run background script LC9_StaticPlatoonsActions(PlatoonPos[1],Ranged,LC9_Platoon[1])

        elsif LC9_Platoon[2] not exists and PLAYER of AztecCapital == 1 and not town AztecCapital is under takeover from player 0 and get LC9_RecruitTimer1 time remaining <= 0
            LC9_Platoon[2] = recruit ARMY_UNIT_TYPE_MELEE_4 town AztecCapital platoon of size 30 * RecruitSizeModifier
            LC9_RecruitTimer1 = create timer for 180 * RecruitModifier seconds
            enable platoon LC9_Platoon[2] respond to town AztecCapital attack
            wait until not LC9_Platoon[2] recruiting
            run background script LC9_StaticPlatoonsActions(PlatoonPos[2],Melee,LC9_Platoon[2])

        elsif LC9_Platoon[3] not exists and PLAYER of AztecCapital == 1 and not town AztecCapital is under takeover from player 0 and get LC9_RecruitTimer1 time remaining <= 0
            LC9_Platoon[3] = recruit ARMY_UNIT_TYPE_MELEE_4 town AztecCapital platoon of size 20 * RecruitSizeModifier
            LC9_RecruitTimer1 = create timer for 180 * RecruitModifier seconds
            enable platoon LC9_Platoon[3] respond to town AztecCapital attack
            wait until not LC9_Platoon[3] recruiting
            run background script LC9_StaticPlatoonsActions(PlatoonPos[3],Melee,LC9_Platoon[3])

        elsif LC9_Platoon[4] not exists and PLAYER of AztecCapital == 1 and not town AztecCapital is under takeover from player 0 and get LC9_RecruitTimer1 time remaining <= 0
            LC9_Platoon[4] = recruit ARMY_UNIT_TYPE_MELEE_4 town AztecCapital platoon of size 20 * RecruitSizeModifier
            LC9_RecruitTimer1 = create timer for 180 * RecruitModifier seconds
            enable platoon LC9_Platoon[4] respond to town AztecCapital attack
            wait until not LC9_Platoon[4] recruiting
            run background script LC9_StaticPlatoonsActions(PlatoonPos[4],Melee,LC9_Platoon[4])

        elsif LC9_Platoon[5] not exists and PLAYER of AztecCapital == 1 and not town AztecCapital is under takeover from player 0 and get LC9_RecruitTimer1 time remaining <= 0
            LC9_Platoon[5] = recruit ARMY_UNIT_TYPE_MELEE_4 town AztecCapital platoon of size 20 * RecruitSizeModifier
            LC9_RecruitTimer1 = create timer for 180 * RecruitModifier seconds
            enable platoon LC9_Platoon[5] respond to town AztecCapital attack
            wait until not LC9_Platoon[5] recruiting
            run background script LC9_StaticPlatoonsActions(PlatoonPos[5],Melee,LC9_Platoon[5])

        elsif LC9_Platoon[22] not exists and HEALTH of AIEarthquake == 1.0 and PLAYER of AztecCapital == 1 and not town AztecCapital is under takeover from player 0 and get LC9_RecruitTimer1 time remaining <= 0
            LC9_Platoon[22] = recruit ARMY_UNIT_TYPE_MELEE_4 town AztecCapital platoon of size 20 * RecruitSizeModifier
            LC9_RecruitTimer1 = create timer for 120 * RecruitModifier seconds
            enable platoon LC9_Platoon[22] respond to town AztecCapital attack
            wait until not LC9_Platoon[22] recruiting
            run background script LC9_StaticPlatoonsActions(PlatoonPos[20],Melee,LC9_Platoon[22])

        elsif LC9_Platoon[23] not exists and HEALTH of AIEarthquake == 1.0 and PLAYER of AztecCapital == 1 and not town AztecCapital is under takeover from player 0 and get LC9_RecruitTimer1 time remaining <= 0
            LC9_Platoon[23] = recruit PLATOON_INFO_AZTEC_RANGED_4 town AztecCapital platoon of size 20 * RecruitSizeModifier
            LC9_RecruitTimer1 = create timer for 120 * RecruitModifier seconds
            enable platoon LC9_Platoon[23] respond to town AztecCapital attack
            wait until not LC9_Platoon[23] recruiting
            run background script LC9_StaticPlatoonsActions(PlatoonPos[21],Ranged,LC9_Platoon[23])

        elsif LC9_Platoon[21] not exists and PLAYER of AztecCapital == 1 and not town AztecCapital is under takeover from player 0 and get LC9_RecruitTimer1 time remaining <= 0
            LC9_Platoon[21] = recruit PLATOON_INFO_AZTEC_MELEE_4 town AztecCapital platoon of size 50 * RecruitSizeModifier
            LC9_RecruitTimer1 = create timer for 120 * RecruitModifier seconds
            enable platoon LC9_Platoon[21] respond to town AztecCapital attack
            wait until not LC9_Platoon[21] recruiting

        elsif LC9_WallArcher[0] not exists and Wall[0] exists and PLAYER of Wall[0] == 1 and HEALTH of Wall[0] == 1.0 and not town AztecCapital is under takeover from player 0 and get LC9_RecruitTimer1 time remaining <= 0
            LC9_WallArcher[0] = recruit ARMY_UNIT_TYPE_RANGED_4 town AztecCapital platoon of size 20 * RecruitSizeModifier
            LC9_RecruitTimer1 = create timer for 60 * RecruitModifier seconds
            wait until not LC9_WallArcher[0] recruiting
            enable platoon LC9_WallArcher[0] respond to town AztecCapital attack
            add action PLATOON_AGENDA_ACTION_GET_ON_WALL using Wall[0] to LC9_WallArcher[0] action queue

        elsif LC9_WallArcher[1] not exists and Wall[1] exists and PLAYER of Wall[1] == 1 and HEALTH of Wall[1] == 1.0 and not town AztecCapital is under takeover from player 0 and get LC9_RecruitTimer1 time remaining <= 0
            LC9_WallArcher[1] = recruit ARMY_UNIT_TYPE_RANGED_4 town AztecCapital platoon of size 20 * RecruitSizeModifier
            LC9_RecruitTimer1 = create timer for 60 * RecruitModifier seconds
            wait until not LC9_WallArcher[1] recruiting
            enable platoon LC9_WallArcher[1] respond to town AztecCapital attack
            add action PLATOON_AGENDA_ACTION_GET_ON_WALL using Wall[1] to LC9_WallArcher[1] action queue

        elsif LC9_WallArcher[2] not exists and Wall[2] exists and PLAYER of Wall[2] == 1 and HEALTH of Wall[2] == 1.0 and not town AztecCapital is under takeover from player 0 and get LC9_RecruitTimer1 time remaining <= 0
            LC9_WallArcher[2] = recruit ARMY_UNIT_TYPE_RANGED_4 town AztecCapital platoon of size 20 * RecruitSizeModifier
            LC9_RecruitTimer1 = create timer for 60 * RecruitModifier seconds
            wait until not LC9_WallArcher[2] recruiting
            enable platoon LC9_WallArcher[2] respond to town AztecCapital attack
            add action PLATOON_AGENDA_ACTION_GET_ON_WALL using Wall[2] to LC9_WallArcher[2] action queue

        elsif LC9_WallArcher[3] not exists and Wall[3] exists and PLAYER of Wall[3] == 1 and HEALTH of Wall[3] == 1.0 and not town AztecCapital is under takeover from player 0 and get LC9_RecruitTimer1 time remaining <= 0
            LC9_WallArcher[3] = recruit ARMY_UNIT_TYPE_RANGED_4 town AztecCapital platoon of size 20 * RecruitSizeModifier
            LC9_RecruitTimer1 = create timer for 60 * RecruitModifier seconds
            wait until not LC9_WallArcher[3] recruiting
            enable platoon LC9_WallArcher[3] respond to town AztecCapital attack
            add action PLATOON_AGENDA_ACTION_GET_ON_WALL using Wall[3] to LC9_WallArcher[3] action queue

        elsif LC9_WallArcher[4] not exists and Wall[4] exists and PLAYER of Wall[4] == 1 and HEALTH of Wall[4] == 1.0 and not town AztecCapital is under takeover from player 0 and get LC9_RecruitTimer1 time remaining <= 0
            LC9_WallArcher[4] = recruit ARMY_UNIT_TYPE_RANGED_4 town AztecCapital platoon of size 20 * RecruitSizeModifier
            LC9_RecruitTimer1 = create timer for 60 * RecruitModifier seconds
            wait until not LC9_WallArcher[4] recruiting
            enable platoon LC9_WallArcher[4] respond to town AztecCapital attack
            add action PLATOON_AGENDA_ACTION_GET_ON_WALL using Wall[4] to LC9_WallArcher[4] action queue

        elsif LC9_WallArcher[5] not exists and Wall[5] exists and PLAYER of Wall[5] == 1 and HEALTH of Wall[5] == 1.0 and not town AztecCapital is under takeover from player 0 and get LC9_RecruitTimer1 time remaining <= 0
            LC9_WallArcher[5] = recruit ARMY_UNIT_TYPE_RANGED_4 town AztecCapital platoon of size 20 * RecruitSizeModifier
            LC9_RecruitTimer1 = create timer for 60 * RecruitModifier seconds
            wait until not LC9_WallArcher[5] recruiting
            enable platoon LC9_WallArcher[5] respond to town AztecCapital attack
            add action PLATOON_AGENDA_ACTION_GET_ON_WALL using Wall[5] to LC9_WallArcher[5] action queue

        elsif LC9_Platoon[41] not exists and TownsConverted >= 6 and MohcBuilt == 0 and PLAYER of AztecCapital == 1 and not town AztecCapital is under takeover from player 0 and get LC9_RecruitTimer1 time remaining <= 0 and ALLOWED_TO_ATTACK == 0
            MohcBuilt = 1 //Only build this super, super large platoon once
            LC9_Platoon[41] = recruit ARMY_UNIT_TYPE_RANGED_4 town AztecCapital platoon of size 150 * RecruitSizeModifier
            LC9_RecruitTimer1 = create timer for 300 * RecruitModifier seconds
            enable platoon LC9_Platoon[41] respond to town AztecCapital attack
            wait until not LC9_Platoon[41] recruiting

        //Attack Nearest Settlement
        elsif LC9_Platoon[42] not exists and PLAYER of AztecCapital == 1 and not town AztecCapital is under takeover from player 0 and get AttackNearestTownTimer time remaining <= 0 and AttackingPlatoons == 1
            LC9_Platoon[42] = recruit ARMY_UNIT_TYPE_RANGED_4 town AztecCapital platoon of size 50 * RecruitSizeModifier
            LC9_RecruitTimer1 = create timer for 200 * RecruitModifier seconds
            enable platoon LC9_Platoon[42] respond to town AztecCapital attack
            wait until not LC9_Platoon[42] recruiting

        elsif LC9_Platoon[43] not exists and LC9_Platoon[42] exists and {LC9_Platoon[42]} near {AztecCapital} radius 550 and PLAYER of AztecCapital == 1 and not town AztecCapital is under takeover from player 0 and get AttackNearestTownTimer time remaining <= 0 and AttackingPlatoons == 1
            LC9_Platoon[43] = recruit ARMY_UNIT_TYPE_MELEE_4 town AztecCapital platoon of size 75 * RecruitSizeModifier
            LC9_RecruitTimer1 = create timer for 200 * RecruitModifier seconds
            enable platoon LC9_Platoon[43] respond to town AztecCapital attack
            wait until not LC9_Platoon[43] recruiting

        elsif LC9_Platoon[44] not exists and LC9_Platoon[42] exists and {LC9_Platoon[42]} near {AztecCapital} radius 550 and PLAYER of AztecCapital == 1 and not town AztecCapital is under takeover from player 0 and get AttackNearestTownTimer time remaining <= 0 and AttackingPlatoons == 1
            LC9_Platoon[44] = recruit ARMY_UNIT_TYPE_MELEE_4 town AztecCapital platoon of size 75 * RecruitSizeModifier
            LC9_RecruitTimer1 = create timer for 200 * RecruitModifier seconds
            enable platoon LC9_Platoon[44] respond to town AztecCapital attack
            wait until not LC9_Platoon[44] recruiting

        elsif LC9_SiegeCatapult[14] not exists and LC9_Platoon[42] exists and {LC9_Platoon[42]} near {AztecCapital} radius 550 and PLAYER of AztecCapital == 1 and not town AztecCapital is under takeover from player 0 and get AttackNearestTownTimer time remaining <= 0 and AttackingPlatoons == 1
            LC9_SiegeCatapult[14] = recruit SIEGE_BALANCE_TYPE_CATAPULT_LEVEL_5 town AztecCapital siege weapon
            LC9_RecruitTimer1 = create timer for 200 * RecruitModifier seconds

        elsif LC9_SiegeCatapult[15] not exists and LC9_Platoon[42] exists and {LC9_Platoon[42]} near {AztecCapital} radius 550 and PLAYER of AztecCapital == 1 and not town AztecCapital is under takeover from player 0 and get AttackNearestTownTimer time remaining <= 0 and AttackingPlatoons == 1
            LC9_SiegeCatapult[15] = recruit SIEGE_BALANCE_TYPE_CATAPULT_LEVEL_5 town AztecCapital siege weapon
            LC9_RecruitTimer1 = create timer for 200 * RecruitModifier seconds

        //Attack PlayerTown
        elsif LC9_Platoon[32] not exists and PLAYER of AztecCapital == 1 and not town AztecCapital is under takeover from player 0 and get LC9_RecruitTimer1 time remaining <= 0 and ALLOWED_TO_ATTACK == 0 and get FristAttackTimer time remaining <= 0
            LC9_Platoon[32] = recruit ARMY_UNIT_TYPE_MELEE_4 town AztecCapital platoon of size 25 * RecruitSizeModifier
            LC9_RecruitTimer1 = create timer for 160 * RecruitModifier seconds
            enable platoon LC9_Platoon[32] respond to town AztecCapital attack
            wait until not LC9_Platoon[32] recruiting

        elsif LC9_Platoon[33] not exists and PLAYER of AztecCapital == 1 and not town AztecCapital is under takeover from player 0 and get LC9_RecruitTimer1 time remaining <= 0 and ALLOWED_TO_ATTACK == 0 and get FristAttackTimer time remaining <= 0
            LC9_Platoon[33] = recruit ARMY_UNIT_TYPE_MELEE_4 town AztecCapital platoon of size 25 * RecruitSizeModifier
            LC9_RecruitTimer1 = create timer for 160 * RecruitModifier seconds
            enable platoon LC9_Platoon[33] respond to town AztecCapital attack
            wait until not LC9_Platoon[33] recruiting

        elsif LC9_Platoon[34] not exists and PLAYER of AztecCapital == 1 and not town AztecCapital is under takeover from player 0 and get LC9_RecruitTimer1 time remaining <= 0 and ALLOWED_TO_ATTACK == 0 and get FristAttackTimer time remaining <= 0
            LC9_Platoon[34] = recruit ARMY_UNIT_TYPE_RANGED_4 town AztecCapital platoon of size 25 * RecruitSizeModifier
            LC9_RecruitTimer1 = create timer for 160 * RecruitModifier seconds
            enable platoon LC9_Platoon[34] respond to town AztecCapital attack
            wait until not LC9_Platoon[34] recruiting

        elsif LC9_SiegeCatapult[5] not exists and PLAYER of AztecCapital == 1 and not town AztecCapital is under takeover from player 0 and get LC9_RecruitTimer1 time remaining <= 0 and ALLOWED_TO_ATTACK == 0 and get FristAttackTimer time remaining <= 0
            LC9_SiegeCatapult[5] = recruit SIEGE_BALANCE_TYPE_CATAPULT_LEVEL_4 town AztecCapital siege weapon
            LC9_RecruitTimer1 = create timer for 100 * RecruitModifier seconds

        elsif LC9_SiegeCatapult[6] not exists and PLAYER of AztecCapital == 1 and not town AztecCapital is under takeover from player 0 and get LC9_RecruitTimer1 time remaining <= 0 and ALLOWED_TO_ATTACK == 0 and get FristAttackTimer time remaining <= 0
            LC9_SiegeCatapult[6] = recruit SIEGE_BALANCE_TYPE_CATAPULT_LEVEL_4 town AztecCapital siege weapon
            LC9_RecruitTimer1 = create timer for 100 * RecruitModifier seconds

        elsif LC9_SiegeCatapult[7] not exists and PLAYER of AztecCapital == 1 and not town AztecCapital is under takeover from player 0 and get LC9_RecruitTimer1 time remaining <= 0 and ALLOWED_TO_ATTACK == 0 and get FristAttackTimer time remaining <= 0
            LC9_SiegeCatapult[7] = recruit SIEGE_BALANCE_TYPE_CATAPULT_LEVEL_4 town AztecCapital siege weapon
            LC9_RecruitTimer1 = create timer for 100 * RecruitModifier seconds

        //AztecTown1

        elsif LC9_Platoon[9] not exists and PLAYER of AztecTown1 == 1 and not town AztecTown1 is under takeover from player 0 and get LC9_RecruitTimer2 time remaining <= 0
            LC9_Platoon[9] = recruit ARMY_UNIT_TYPE_MELEE_4 town AztecTown1 platoon of size 30 * RecruitSizeModifier
            LC9_RecruitTimer2 = create timer for 180 * RecruitModifier seconds
            enable platoon LC9_Platoon[9] respond to town AztecTown1 attack
            wait until not LC9_Platoon[9] recruiting
            run background script LC9_StaticPlatoonsActions(PlatoonPos[9],Melee,LC9_Platoon[9])

        elsif LC9_Platoon[10] not exists and PLAYER of AztecTown1 == 1 and not town AztecTown1 is under takeover from player 0 and get LC9_RecruitTimer2 time remaining <= 0
            LC9_Platoon[10] = recruit ARMY_UNIT_TYPE_MELEE_4 town AztecTown1 platoon of size 30 * RecruitSizeModifier
            LC9_RecruitTimer2 = create timer for 180 * RecruitModifier seconds
            enable platoon LC9_Platoon[10] respond to town AztecTown1 attack
            wait until not LC9_Platoon[10] recruiting
            run background script LC9_StaticPlatoonsActions(PlatoonPos[10],Melee,LC9_Platoon[10])

        elsif LC9_Platoon[11] not exists and PLAYER of AztecTown1 == 1 and not town AztecTown1 is under takeover from player 0 and get LC9_RecruitTimer2 time remaining <= 0
            LC9_Platoon[11] = recruit ARMY_UNIT_TYPE_RANGED_4 town AztecTown1 platoon of size 25 * RecruitSizeModifier
            LC9_RecruitTimer2 = create timer for 180 * RecruitModifier seconds
            enable platoon LC9_Platoon[11] respond to town AztecTown1 attack
            wait until not LC9_Platoon[11] recruiting
            run background script LC9_StaticPlatoonsActions(PlatoonPos[11],Ranged,LC9_Platoon[11])

        elsif LC9_Platoon[12] not exists and PLAYER of AztecTown1 == 1 and not town AztecTown1 is under takeover from player 0 and get LC9_RecruitTimer2 time remaining <= 0
            LC9_Platoon[12] = recruit ARMY_UNIT_TYPE_RANGED_4 town AztecTown1 platoon of size 25 * RecruitSizeModifier
            LC9_RecruitTimer2 = create timer for 180 * RecruitModifier seconds
            enable platoon LC9_Platoon[12] respond to town AztecTown1 attack
            wait until not LC9_Platoon[12] recruiting
            run background script LC9_StaticPlatoonsActions(PlatoonPos[12],Ranged,LC9_Platoon[12])

        elsif LC9_WallArcher[8] not exists and Wall[8] exists and PLAYER of Wall[8] == 1 and HEALTH of Wall[8] == 1.0 and not town AztecTown1 is under takeover from player 0 and get LC9_RecruitTimer2 time remaining <= 0
            LC9_WallArcher[8] = recruit ARMY_UNIT_TYPE_RANGED_4 town AztecTown1 platoon of size 20 * RecruitSizeModifier
            LC9_RecruitTimer2 = create timer for 60 * RecruitModifier seconds
            wait until not LC9_WallArcher[8] recruiting
            enable platoon LC9_WallArcher[8] respond to town AztecTown1 attack
            add action PLATOON_AGENDA_ACTION_GET_ON_WALL using Wall[8] to LC9_WallArcher[8] action queue

        elsif LC9_WallArcher[9] not exists and Wall[9] exists and PLAYER of Wall[9] == 1 and HEALTH of Wall[9] == 1.0 and not town AztecTown1 is under takeover from player 0 and get LC9_RecruitTimer2 time remaining <= 0
            LC9_WallArcher[9] = recruit ARMY_UNIT_TYPE_RANGED_4 town AztecTown1 platoon of size 20 * RecruitSizeModifier
            LC9_RecruitTimer2 = create timer for 60 * RecruitModifier seconds
            wait until not LC9_WallArcher[9] recruiting
            enable platoon LC9_WallArcher[9] respond to town AztecTown1 attack
            add action PLATOON_AGENDA_ACTION_GET_ON_WALL using Wall[9] to LC9_WallArcher[9] action queue

        elsif LC9_WallArcher[10] not exists and Wall[10] exists and PLAYER of Wall[10] == 1 and HEALTH of Wall[10] == 1.0 and not town AztecTown1 is under takeover from player 0 and get LC9_RecruitTimer2 time remaining <= 0
            LC9_WallArcher[10] = recruit ARMY_UNIT_TYPE_RANGED_4 town AztecTown1 platoon of size 20 * RecruitSizeModifier
            LC9_RecruitTimer2 = create timer for 60 * RecruitModifier seconds
            wait until not LC9_WallArcher[10] recruiting
            enable platoon LC9_WallArcher[10] respond to town AztecTown1 attack
            add action PLATOON_AGENDA_ACTION_GET_ON_WALL using Wall[10] to LC9_WallArcher[8] action queue

        elsif LC9_WallArcher[11] not exists and Wall[11] exists and PLAYER of Wall[11] == 1 and HEALTH of Wall[11] == 1.0 and not town AztecTown1 is under takeover from player 0 and get LC9_RecruitTimer2 time remaining <= 0
            LC9_WallArcher[11] = recruit ARMY_UNIT_TYPE_RANGED_4 town AztecTown1 platoon of size 20 * RecruitSizeModifier
            LC9_RecruitTimer2 = create timer for 60 * RecruitModifier seconds
            wait until not LC9_WallArcher[11] recruiting
            enable platoon LC9_WallArcher[11] respond to town AztecTown1 attack
            add action PLATOON_AGENDA_ACTION_GET_ON_WALL using Wall[11] to LC9_WallArcher[11] action queue

        //Attack PlayerTown LargeAttack
        elsif LC9_Platoon[35] not exists and PLAYER of AztecTown1 == 1 and not town AztecTown1 is under takeover from player 0 and get LC9_RecruitTimer2 time remaining <= 0 and ALLOWED_TO_ATTACK == 0 and get LargeAttackTimer time remaining <= 0
            LC9_Platoon[35] = recruit ARMY_UNIT_TYPE_MELEE_4 town AztecTown1 platoon of size 35 * RecruitSizeModifier
            LC9_RecruitTimer2 = create timer for 160 * RecruitModifier seconds
            enable platoon LC9_Platoon[35] respond to town AztecTown1 attack
            wait until not LC9_Platoon[35] recruiting

        elsif LC9_Platoon[36] not exists and PLAYER of AztecTown1 == 1 and not town AztecTown1 is under takeover from player 0 and get LC9_RecruitTimer2 time remaining <= 0 and ALLOWED_TO_ATTACK == 0 and get LargeAttackTimer time remaining <= 0
            LC9_Platoon[36] = recruit ARMY_UNIT_TYPE_RANGED_4 town AztecTown1 platoon of size 35 * RecruitSizeModifier
            LC9_RecruitTimer2 = create timer for 160 * RecruitModifier seconds
            enable platoon LC9_Platoon[36] respond to town AztecTown1 attack
            wait until not LC9_Platoon[36] recruiting

        elsif LC9_SiegeCatapult[8] not exists and PLAYER of AztecTown1 == 1 and not town AztecTown1 is under takeover from player 0 and get LC9_RecruitTimer2 time remaining <= 0 and ALLOWED_TO_ATTACK == 0 and get LargeAttackTimer time remaining <= 0
            LC9_SiegeCatapult[8] = recruit SIEGE_BALANCE_TYPE_CATAPULT_LEVEL_4 town AztecTown1 siege weapon
            LC9_RecruitTimer2 = create timer for 100 * RecruitModifier seconds

        elsif LC9_SiegeCatapult[9] not exists and PLAYER of AztecTown1 == 1 and not town AztecTown1 is under takeover from player 0 and get LC9_RecruitTimer2 time remaining <= 0 and ALLOWED_TO_ATTACK == 0 and get LargeAttackTimer time remaining <= 0
            LC9_SiegeCatapult[9] = recruit SIEGE_BALANCE_TYPE_CATAPULT_LEVEL_4 town AztecTown1 siege weapon
            LC9_RecruitTimer2 = create timer for 100 * RecruitModifier seconds

        //AztecTown2

        elsif LC9_Platoon[13] not exists and PLAYER of AztecTown2 == 1 and not town AztecTown2 is under takeover from player 0 and get LC9_RecruitTimer3 time remaining <= 0
            LC9_Platoon[13] = recruit ARMY_UNIT_TYPE_MELEE_4 town AztecTown2 platoon of size 20 * RecruitSizeModifier
            LC9_RecruitTimer3 = create timer for 120 * RecruitModifier seconds
            enable platoon LC9_Platoon[13] respond to town AztecTown2 attack
            wait until not LC9_Platoon[13] recruiting
            run background script LC9_StaticPlatoonsActions(PlatoonPos[13],Melee,LC9_Platoon[13])

        elsif LC9_Platoon[14] not exists and PLAYER of AztecTown2 == 1 and not town AztecTown2 is under takeover from player 0 and get LC9_RecruitTimer3 time remaining <= 0
            LC9_Platoon[14] = recruit ARMY_UNIT_TYPE_RANGED_4 town AztecTown2 platoon of size 20 * RecruitSizeModifier
            LC9_RecruitTimer3 = create timer for 120 * RecruitModifier seconds
            enable platoon LC9_Platoon[14] respond to town AztecTown2 attack
            wait until not LC9_Platoon[14] recruiting
            run background script LC9_StaticPlatoonsActions(PlatoonPos[14],Ranged,LC9_Platoon[14])

        elsif LC9_Platoon[15] not exists and PLAYER of AztecTown2 == 1 and not town AztecTown2 is under takeover from player 0 and get LC9_RecruitTimer3 time remaining <= 0
            LC9_Platoon[15] = recruit ARMY_UNIT_TYPE_MELEE_4 town AztecTown2 platoon of size 20 * RecruitSizeModifier
            LC9_RecruitTimer3 = create timer for 180 * RecruitModifier seconds
            enable platoon LC9_Platoon[15] respond to town AztecTown2 attack
            wait until not LC9_Platoon[15] recruiting
            run background script LC9_StaticPlatoonsActions(PlatoonPos[15],Melee,LC9_Platoon[15])

        elsif LC9_Platoon[16] not exists and PLAYER of AztecTown2 == 1 and not town AztecTown2 is under takeover from player 0 and get LC9_RecruitTimer3 time remaining <= 0
            LC9_Platoon[16] = recruit ARMY_UNIT_TYPE_MELEE_4 town AztecTown2 platoon of size 20 * RecruitSizeModifier
            LC9_RecruitTimer3 = create timer for 180 * RecruitModifier seconds
            enable platoon LC9_Platoon[16] respond to town AztecTown2 attack
            wait until not LC9_Platoon[16] recruiting
            run background script LC9_StaticPlatoonsActions(PlatoonPos[16],Melee,LC9_Platoon[16])

        elsif LC9_Platoon[17] not exists and PLAYER of AztecTown2 == 1 and not town AztecTown2 is under takeover from player 0 and get LC9_RecruitTimer3 time remaining <= 0
            LC9_Platoon[17] = recruit ARMY_UNIT_TYPE_MELEE_4 town AztecTown2 platoon of size 20 * RecruitSizeModifier
            LC9_RecruitTimer3 = create timer for 180 * RecruitModifier seconds
            enable platoon LC9_Platoon[17] respond to town AztecTown2 attack
            wait until not LC9_Platoon[17] recruiting
            run background script LC9_StaticPlatoonsActions(PlatoonPos[17],Melee,LC9_Platoon[17])

        elsif LC9_WallArcher[12] not exists and Wall[12] exists and PLAYER of Wall[12] == 1 and HEALTH of Wall[12] == 1.0 and not town AztecTown2 is under takeover from player 0 and get LC9_RecruitTimer3 time remaining <= 0
            LC9_WallArcher[12] = recruit ARMY_UNIT_TYPE_RANGED_4 town AztecTown2 platoon of size 20 * RecruitSizeModifier
            LC9_RecruitTimer3 = create timer for 60 * RecruitModifier seconds
            wait until not LC9_WallArcher[12] recruiting
            enable platoon LC9_WallArcher[12] respond to town AztecTown2 attack
            add action PLATOON_AGENDA_ACTION_GET_ON_WALL using Wall[12] to LC9_WallArcher[12] action queue

        elsif LC9_WallArcher[13] not exists and Wall[13] exists and PLAYER of Wall[13] == 1 and HEALTH of Wall[13] == 1.0 and not town AztecTown2 is under takeover from player 0 and get LC9_RecruitTimer3 time remaining <= 0
            LC9_WallArcher[13] = recruit ARMY_UNIT_TYPE_RANGED_4 town AztecTown2 platoon of size 20 * RecruitSizeModifier
            LC9_RecruitTimer3 = create timer for 60 * RecruitModifier seconds
            wait until not LC9_WallArcher[13] recruiting
            enable platoon LC9_WallArcher[13] respond to town AztecTown2 attack
            add action PLATOON_AGENDA_ACTION_GET_ON_WALL using Wall[13] to LC9_WallArcher[13] action queue

        elsif LC9_WallArcher[14] not exists and Wall[14] exists and PLAYER of Wall[14] == 1 and HEALTH of Wall[14] == 1.0 and not town AztecTown2 is under takeover from player 0 and get LC9_RecruitTimer3 time remaining <= 0
            LC9_WallArcher[14] = recruit ARMY_UNIT_TYPE_RANGED_4 town AztecTown2 platoon of size 20 * RecruitSizeModifier
            LC9_RecruitTimer3 = create timer for 60 * RecruitModifier seconds
            wait until not LC9_WallArcher[14] recruiting
            enable platoon LC9_WallArcher[14] respond to town AztecTown2 attack
            add action PLATOON_AGENDA_ACTION_GET_ON_WALL using Wall[14] to LC9_WallArcher[14] action queue

        elsif LC9_WallArcher[15] not exists and Wall[15] exists and PLAYER of Wall[15] == 1 and HEALTH of Wall[15] == 1.0 and not town AztecTown2 is under takeover from player 0 and get LC9_RecruitTimer3 time remaining <= 0
            LC9_WallArcher[15] = recruit ARMY_UNIT_TYPE_RANGED_4 town AztecTown2 platoon of size 20 * RecruitSizeModifier
            LC9_RecruitTimer3 = create timer for 60 * RecruitModifier seconds
            wait until not LC9_WallArcher[15] recruiting
            enable platoon LC9_WallArcher[15] respond to town AztecTown2 attack
            add action PLATOON_AGENDA_ACTION_GET_ON_WALL using Wall[15] to LC9_WallArcher[15] action queue
        
        elsif LC9_WallArcher[16] not exists and Wall[16] exists and PLAYER of Wall[16] == 1 and HEALTH of Wall[16] == 1.0 and not town AztecTown2 is under takeover from player 0 and get LC9_RecruitTimer3 time remaining <= 0
            LC9_WallArcher[16] = recruit ARMY_UNIT_TYPE_RANGED_4 town AztecTown2 platoon of size 20 * RecruitSizeModifier
            LC9_RecruitTimer3 = create timer for 60 * RecruitModifier seconds
            wait until not LC9_WallArcher[16] recruiting
            enable platoon LC9_WallArcher[16] respond to town AztecTown2 attack
            add action PLATOON_AGENDA_ACTION_GET_ON_WALL using Wall[16] to LC9_WallArcher[16] action queue

        //Attack PlayerTown LargeAttack
        elsif LC9_Platoon[37] not exists and PLAYER of AztecTown2 == 1 and not town AztecTown2 is under takeover from player 0 and get LC9_RecruitTimer3 time remaining <= 0 and ALLOWED_TO_ATTACK == 0 and get LargeAttackTimer time remaining <= 0
            LC9_Platoon[37] = recruit ARMY_UNIT_TYPE_MELEE_4 town AztecTown2 platoon of size 35 * RecruitSizeModifier
            LC9_RecruitTimer3 = create timer for 160 * RecruitModifier seconds
            enable platoon LC9_Platoon[37] respond to town AztecTown2 attack
            wait until not LC9_Platoon[37] recruiting

        elsif LC9_Platoon[38] not exists and PLAYER of AztecTown2 == 1 and not town AztecTown2 is under takeover from player 0 and get LC9_RecruitTimer3 time remaining <= 0 and ALLOWED_TO_ATTACK == 0 and get LargeAttackTimer time remaining <= 0
            LC9_Platoon[38] = recruit ARMY_UNIT_TYPE_RANGED_4 town AztecTown2 platoon of size 35 * RecruitSizeModifier
            LC9_RecruitTimer3 = create timer for 160 * RecruitModifier seconds
            enable platoon LC9_Platoon[38] respond to town AztecTown2 attack
            wait until not LC9_Platoon[38] recruiting

        elsif LC9_SiegeCatapult[10] not exists and PLAYER of AztecTown2 == 1 and not town AztecTown2 is under takeover from player 0 and get LC9_RecruitTimer3 time remaining <= 0 and ALLOWED_TO_ATTACK == 0 and get LargeAttackTimer time remaining <= 0
            LC9_SiegeCatapult[10] = recruit SIEGE_BALANCE_TYPE_CATAPULT_LEVEL_4 town AztecTown2 siege weapon
            LC9_RecruitTimer3 = create timer for 100 * RecruitModifier seconds

        elsif LC9_SiegeCatapult[11] not exists and PLAYER of AztecTown2 == 1 and not town AztecTown2 is under takeover from player 0 and get LC9_RecruitTimer3 time remaining <= 0 and ALLOWED_TO_ATTACK == 0 and get LargeAttackTimer time remaining <= 0
            LC9_SiegeCatapult[11] = recruit SIEGE_BALANCE_TYPE_CATAPULT_LEVEL_4 town AztecTown2 siege weapon
            LC9_RecruitTimer3 = create timer for 100 * RecruitModifier seconds

        //AztecTown3

        elsif LC9_Platoon[18] not exists and PLAYER of AztecTown3 == 1 and not town AztecTown3 is under takeover from player 0 and get LC9_RecruitTimer4 time remaining <= 0
            LC9_Platoon[18] = recruit ARMY_UNIT_TYPE_MELEE_4 town AztecTown3 platoon of size 20 * RecruitSizeModifier
            LC9_RecruitTimer4 = create timer for 120 * RecruitModifier seconds
            enable platoon LC9_Platoon[18] respond to town AztecTown3 attack
            wait until not LC9_Platoon[18] recruiting
            run background script LC9_StaticPlatoonsActions(PlatoonPos[18],Melee,LC9_Platoon[18])

        elsif LC9_Platoon[19] not exists and PLAYER of AztecTown3 == 1 and not town AztecTown3 is under takeover from player 0 and get LC9_RecruitTimer4 time remaining <= 0
            LC9_Platoon[19] = recruit PLATOON_INFO_AZTEC_RANGED_4 town AztecTown3 platoon of size 20 * RecruitSizeModifier
            LC9_RecruitTimer4 = create timer for 120 * RecruitModifier seconds
            enable platoon LC9_Platoon[19] respond to town AztecTown3 attack
            wait until not LC9_Platoon[19] recruiting
            run background script LC9_StaticPlatoonsActions(PlatoonPos[19],Ranged,LC9_Platoon[19])

        //Attack PlayerTown LargeAttack
        elsif LC9_Platoon[39] not exists and PLAYER of AztecTown3 == 1 and not town AztecTown3 is under takeover from player 0 and get LC9_RecruitTimer4 time remaining <= 0 and ALLOWED_TO_ATTACK == 0 and get LargeAttackTimer time remaining <= 0
            LC9_Platoon[39] = recruit ARMY_UNIT_TYPE_MELEE_4 town AztecTown3 platoon of size 35 * RecruitSizeModifier
            LC9_RecruitTimer4 = create timer for 160 * RecruitModifier seconds
            enable platoon LC9_Platoon[39] respond to town AztecTown3 attack
            wait until not LC9_Platoon[39] recruiting

        elsif LC9_Platoon[40] not exists and PLAYER of AztecTown3 == 1 and not town AztecTown3 is under takeover from player 0 and get LC9_RecruitTimer4 time remaining <= 0 and ALLOWED_TO_ATTACK == 0 and get LargeAttackTimer time remaining <= 0
            LC9_Platoon[40] = recruit ARMY_UNIT_TYPE_RANGED_4 town AztecTown3 platoon of size 35 * RecruitSizeModifier
            LC9_RecruitTimer4 = create timer for 160 * RecruitModifier seconds
            enable platoon LC9_Platoon[40] respond to town AztecTown3 attack
            wait until not LC9_Platoon[40] recruiting

        elsif LC9_SiegeCatapult[12] not exists and PLAYER of AztecTown3 == 1 and not town AztecTown3 is under takeover from player 0 and get LC9_RecruitTimer4 time remaining <= 0 and ALLOWED_TO_ATTACK == 0 and get LargeAttackTimer time remaining <= 0
            LC9_SiegeCatapult[12] = recruit SIEGE_BALANCE_TYPE_CATAPULT_LEVEL_4 town AztecTown3 siege weapon
            LC9_RecruitTimer4 = create timer for 100 * RecruitModifier seconds

        elsif LC9_SiegeCatapult[13] not exists and PLAYER of AztecTown3 == 1 and not town AztecTown3 is under takeover from player 0 and get LC9_RecruitTimer4 time remaining <= 0 and ALLOWED_TO_ATTACK == 0 and get LargeAttackTimer time remaining <= 0
            LC9_SiegeCatapult[13] = recruit SIEGE_BALANCE_TYPE_CATAPULT_LEVEL_4 town AztecTown3 siege weapon
            LC9_RecruitTimer4 = create timer for 100 * RecruitModifier seconds

        end if

        if get WallTimer time remaining <= 0
            if WallCounter < 8
                PlannedWall[WallCounter] = build building at {PlannedWallPos[WallCounter]} desire 1.0
                add resource RESOURCE_TYPE_ORE number from 8250 to 8750 to PlannedWall[WallCounter]
                WallCounter++
            end if
        end if

        if HEALTH of WonderTemple >= 1.0 and get FireRainTimer time remaining <= 0 and PLAYER of AztecTown1 == 1 and CinemaIsRunning == 0 and not town PlayerTown is under takeover from player 1 and Difficulty >= 2
            if PLAYER of MinorTown3 == 0 or get town MinorTown3 is migrating to == PlayerTown or get army size in town PlayerTown > 60 or size of PlayerTown > 250

                if FireRainFirstTime == 1
                    FireRainFirstTime = 0
                    FireRainInitialized = 1
                    run background script LC9_FireRainIntro
                end if

                if FireRainIntro == 1
                    run background script LC9_FireRain
                    FireRainTimer = create timer for 2600 * EpicModifier seconds
                end if
            elsif FireRainIntro == 1
                run background script LC9_FireRain
                FireRainTimer = create timer for 2600 * EpicModifier seconds
            end if
        end if

        if get EarthquakeTimer time remaining <= 300 and HEALTH of AIEarthquake >= 1.0 and CHARGE of AIEarthquake != 1.0
            CHARGE of AIEarthquake = 1.0
        end if

        if TownsConverted >= 3 or TownsAggressiveConverted >= 1
            if EarthquakeFirstTime == 0
                EarthquakeFirstTime = 1
                EarthquakeTimer = create timer for 360 seconds
            end if
        end if

        if PLAYER of AztecCapital == 1 and HEALTH of AIEarthquake >= 1.0 and get EarthquakeTimer time remaining <= 0 and CinemaIsRunning == 0 and not town PlayerTown is under takeover from player 1 and PLAYER of PlayerTown == 0
            if TownsConverted >= 3 or TownsAggressiveConverted >= 1

                enable predefined sky "EARTHQUAKE" time 9

                EarthquakeFired = 1
                Number = number from 1 to 2
                if Number <= 1
                    CastEpicPos = marker at {1354.59,33.30,397.51}
                else
                    CastEpicPos = marker at {1843.21,26.56,567.86}
                end if
                    
                run script EpicTargeter(PlayerTown,marker at {CastEpicPos},0)

                wait 5 seconds
                invoke AIEarthquake EPIC_WONDER_STAGE_1
                play sound "SCRIPT2_EEPIC_SYNTH3" at {AIEarthquake}
                wait 2.5 seconds
                wait 2 seconds
                play sound "SCRIPT2_EEPIC_SYNTH3" at {AIEarthquake}
                invoke AIEarthquake EPIC_WONDER_STAGE_2
                wait 1 second
                enable predefined sky "EARTHQUAKE" time 5
                wait 2 seconds
                invoke AIEarthquake EPIC_WONDER_STAGE_3
                invoke AIEarthquake EPIC_WONDER_STAGE_4
                invoke AIEarthquake EPIC_WONDER_STAGE_5
                invoke AIEarthquake EPIC_WONDER_STAGE_6
                play sound "BEAMOFLIGHTLOOP1" at {AIEarthquake}
                wait 2 seconds
                play sound "BEAMOFLIGHTLOOP1" at {AIEarthquake}
                play sound "SCRIPT2_EEPIC_SYNTH2" at {AIEarthquake}
                invoke AIEarthquake EPIC_WONDER_STAGE_7
                invoke AIEarthquake EPIC_WONDER_STAGE_8
                invoke AIEarthquake EPIC_WONDER_STAGE_9
                invoke AIEarthquake EPIC_WONDER_STAGE_10
                invoke AIEarthquake EPIC_WONDER_STAGE_START_BEAM
                invoke AIEarthquake EPIC_START_CASTING
                invoke AIEarthquake EPIC_PULSE_UP

                EarthquakeWarning = create visual effect VISUAL_EFFECT_EPIC_TARGET_WARNING at {ET_FireEpicLocation} time 15 target {ET_FireEpicLocation}
                wait 13 seconds
                wait until dialogue ready and camera ready
                run background script LC9_EarthquakeCinema(ET_FireEpicLocation)
                wait 2 seconds
                EpicEart = create earthquake start {PlayerTown} end {ET_FireEpicLocation} player 1
                    
                run background script LC9_Earthquake(AIEarthquake, EpicEart)

                EarthquakeTimer = create timer for EARTHQUAKEDELAY * EpicModifier seconds
                EARTHQUAKEDELAY += 500

            end if
        end if

        if PLAYER of AztecCapital == 0 or PLAYER of AztecTown1 == 0 or PLAYER of AztecTown2 == 0 or PLAYER of AztecTown3 == 0 or PLAYER of MinorTown8 == 0 or PLAYER of MinorTown4 == 0 or PLAYER of AztecCapital != 1
            //Take over a town and start attacking the player a lot    
            if NearestSettlement != 0 and PLAYER of NearestSettlement == 0
                AttackingPlatoons = 1
            end if

        elsif PLAYER of NearestSettlement == 1 and AttackingPlatoons == 1
            //Attack PlayerTown with remaining troops
            AttackingPlatoons = 0
        end if

    end loop

end script LC9_Aztec_Capital

begin script LC9_AttackNearestTownTimer

start

begin loop

    if get AttackNearestTownTimer time remaining <= 0
        wait 45 seconds
        AttackNearestTownTimer = create timer for 1500 * RecruitModifier seconds
    end if

end loop

end script LC9_AttackNearestTownTimer

begin script LC9_DefendPlatoons

    PlayerPlatoon = 0
    DefendRecruitTimer1 = create timer for 0 seconds
    DefendRecruitTimer2 = create timer for 0 seconds
    DefendRecruitTimer3 = create timer for 0 seconds
    DefendRecruitTimer4 = create timer for 0 seconds

start

    begin loop
        PlayerPlatoon = get platoon of player 0 nearest {AztecCapital} radius 300
        if PlayerPlatoon exists and LC9_Platoon[24] not exists and LC9_Platoon[25] not exists and get DefendRecruitTimer1 time remaining <= 0 and PLAYER of AztecCapital == 1 //Makes a couple of defend platoons
            LC9_Platoon[24] = recruit ARMY_UNIT_TYPE_MELEE_4 town AztecCapital platoon of size 25 * RecruitSizeModifier
            enable platoon LC9_Platoon[24] respond to town AztecCapital attack
            wait until not LC9_Platoon[24] recruiting
            
            LC9_Platoon[25] = recruit ARMY_UNIT_TYPE_RANGED_4 town AztecCapital platoon of size 20 * RecruitSizeModifier
            enable platoon LC9_Platoon[25] respond to town AztecCapital attack
            wait until not LC9_Platoon[25] recruiting
            
            DefendRecruitTimer1 = create timer for 180 * RecruitModifier seconds
        end if

        PlayerPlatoon = get platoon of player 0 nearest {AztecTown1} radius 300
        if PlayerPlatoon exists and LC9_Platoon[26] not exists and LC9_Platoon[27] not exists and get DefendRecruitTimer2 time remaining <= 0 and PLAYER of AztecTown1 == 1 //Makes a couple of defend platoons
            LC9_Platoon[26] = recruit ARMY_UNIT_TYPE_MELEE_4 town AztecTown1 platoon of size 20 * RecruitSizeModifier
            enable platoon LC9_Platoon[26] respond to town AztecTown1 attack
            wait until not LC9_Platoon[26] recruiting
            
            LC9_Platoon[27] = recruit ARMY_UNIT_TYPE_RANGED_4 town AztecTown1 platoon of size 20 * RecruitSizeModifier
            enable platoon LC9_Platoon[27] respond to town AztecTown1 attack
            wait until not LC9_Platoon[27] recruiting
            
            DefendRecruitTimer2 = create timer for 180 * RecruitModifier seconds
        end if

        PlayerPlatoon = get platoon of player 0 nearest {AztecTown2} radius 300
        if PlayerPlatoon exists and LC9_Platoon[28] not exists and LC9_Platoon[29] not exists and get DefendRecruitTimer3 time remaining <= 0 and PLAYER of AztecTown2 == 1 //Makes a couple of defend platoons
            LC9_Platoon[28] = recruit ARMY_UNIT_TYPE_MELEE_4 town AztecTown2 platoon of size 20 * RecruitSizeModifier
            enable platoon LC9_Platoon[28] respond to town AztecTown2 attack
            wait until not LC9_Platoon[28] recruiting
            
            LC9_Platoon[29] = recruit ARMY_UNIT_TYPE_RANGED_4 town AztecTown2 platoon of size 20 * RecruitSizeModifier
            enable platoon LC9_Platoon[29] respond to town AztecTown2 attack
            wait until not LC9_Platoon[29] recruiting
            
            DefendRecruitTimer3 = create timer for 180 * RecruitModifier seconds
        end if

        PlayerPlatoon = get platoon of player 0 nearest {AztecTown3} radius 300
        if PlayerPlatoon exists and LC9_Platoon[30] not exists and LC9_Platoon[31] not exists and get DefendRecruitTimer4 time remaining <= 0 and PLAYER of AztecTown3 == 1 //Makes a couple of defend platoons
            LC9_Platoon[30] = recruit ARMY_UNIT_TYPE_MELEE_4 town AztecTown3 platoon of size 20 * RecruitSizeModifier
            enable platoon LC9_Platoon[30] respond to town AztecTown3 attack
            wait until not LC9_Platoon[30] recruiting
            
            LC9_Platoon[31] = recruit ARMY_UNIT_TYPE_RANGED_4 town AztecTown3 platoon of size 20 * RecruitSizeModifier
            enable platoon LC9_Platoon[31] respond to town AztecTown3 attack
            wait until not LC9_Platoon[31] recruiting
            
            DefendRecruitTimer4 = create timer for 180 * RecruitModifier seconds
        end if
    end loop

end script LC9_DefendPlatoons

//Decides in which direction the earthquake will go
begin script LC9_EarthquakeCinema(Earthquake)

X = 0
Y = 150
Z = 0
XOK = 0
ZOK = 0

start

XOK = 0
ZOK = 0
X = 0
Y = 150
Z = 0

begin loop
    if X < 80 and X > -80
        X = number from -125 to 125
    else
        XOK = 1
    end if
    if Z < 80 and Z > -80
        Z = number from -125 to 125
    else
        ZOK = 1
    end if

    until XOK == 1 and ZOK == 1
end loop


begin interruptible cinema

    set camera position to {Earthquake} + {X,Y,Z}
    set camera focus to {Earthquake} + {0,10,0 }
    wait 5 seconds

end cinema

end script LC9_EarthquakeCinema

begin script LC9_LargeAttackTimer

start

begin loop
    if get LargeAttackTimer time remaining <= 0
        wait 900 seconds
        LargeAttackTimer = create timer for 2000 seconds
    end if
end loop

end script LC9_LargeAttackTimer

begin script LC9_FireRainIntro

    Weather[1]
    Counter = 0
    Visual1 = 0
    Visual2 = 0
    Visual3 = 0
    TownCentre = 0
    FireBallStart = 0
    FireBallTarget = 0
    FireBall = 0
    Position = 0

start

    wait until EpicRunning == 0
    EpicRunning = 1

    enable predefined sky "VOLCANO" time 15
    Weather[0] = create SCRIPT_OBJECT_TYPE_WEATHER_THING WEATHER_INFO_MEDIUM_CLOUD at {MinorTown3} + {0, 0, 0}
    set cloud for Weather[0] above {MinorTown3} + {0, 30, 0}
    set cloud generation 7
    set Weather[0] properties rainfall 1 snowfall 0 overcast 0.9
    SCALE of Weather[0] = 5

    wait 25 seconds

    Position = marker at {Weather[0]} + {0, -30, 0}
    run background script LC9_WeatherLightning(Position, Weather[0])

    wait 10 seconds

    begin cinema

        store camera details

        set fade red 0 green 0 blue 0 time 2
        wait 2 seconds
        start music "nemesis" loop 1
        set fade in time 4

        Visual2 = create visual effect VISUAL_EFFECT_MIRACLE_CHARGE at {WonderTemple} + {0,1.5,0} time -1
        set Visual2 colour red 192 green 0 blue 0
        SCALE of Visual2 = 6

        reset camera path
        queue camera move with position {1032.84,45.82,1347.02} focus {WonderTemple} + {0,30,0} time 0.0
        play camera path with easein 4 easeout 8 method SCRIPT_CAMERAPATH_EQUALDISTANCE

        wait 4 seconds

        reset camera path
        queue camera move with position {925.75,42.14,1409.75} focus {WonderTemple} + {0,10,0} time 0.0
        queue camera move with position {925.100,74.14,1409.75} focus {WonderTemple} + {0,50,0} time 8.25
        play camera path with easein 4 easeout 8 method SCRIPT_CAMERAPATH_EQUALDISTANCE

        wait 8 seconds
        reset camera path
        queue camera move with position {1042.43,300.41,1014.21} focus {WonderTemple} + {0,30,0} time 0
        play camera path with easein 4 easeout 8 method SCRIPT_CAMERAPATH_EQUALDISTANCE

        wait 1.25 seconds
        Visual1 = create visual effect VISUAL_EFFECT_EPIC_VOLCANO_BEAM_PULSE_UP at {WonderTemple} time -1 target {WonderTemple}
        Visual3 = create visual effect VISUAL_EFFECT_EPIC_VOLCANO_BEAM at {WonderTemple} time -1 target {WonderTemple}
        set Visual1 colour red 192 green 0 blue 0
        set Visual3 colour red 192 green 0 blue 0
        play string sound "SCRIPT1_VEPIC_EXPLOSION3"

        wait 3 seconds
        set fade red 255 green 255 blue 255 time 2
        wait 2 seconds

        reset camera path
        queue camera move with position {MinorTown3} + {50,50,50} focus {MinorTown3} + {0,10,0} time 0.0
        queue camera move with position {MinorTown3} + {75,40,75} focus {MinorTown3} time 13.0
        queue camera move with position {MinorTown3} + {150,75,150} focus {MinorTown3} time 6.0
        play camera path with easein 4 easeout 8 method SCRIPT_CAMERAPATH_EQUALDISTANCE

        set fade in time 3

        wait 5 seconds

        while Counter < 7
            wait number from 1.5 to 2 seconds
            FireBallStart = marker at ({Weather[0]} + {0, 500, 0} + {number from -75 to 75, number from -10 to 15, number from -75 to 75})
            FireBallTarget = marker at ({FireBallStart} + {number from -5 to 5, number from -5 to -15, number from -5 to 5})
            FireBall = make player 2 throw miracle MIRACLE_TYPE_FIRE from ({FireBallStart} + {0,-3.0,0}) heading ({FireBallTarget} + {0,21,0} - {FireBallStart})
            Counter++
        end while
        Counter = 0

        wait 7 seconds

        set fade red 0 green 0 blue 0 time 2
        wait 2 seconds

        Position = marker at {Weather[0]} + {0, 500, 0}
        run background script LC9_FireBalls(Position, Weather[0])
        run background script LC9_FireBallsBarrel(Position, Weather[0])

        set fade in time 3
        restore camera details

    end cinema

    EpicRunning = 0

    FireRainIntro = 1

    wait 200 seconds

    delete Visual1 with fade
    delete Visual2 with fade
    delete Visual3 with fade
    delete Weather[0]

end script LC9_FireRainIntro

begin script LC9_FireRain

    Weather[6]
    Position = 0

start

    //if PLAYER of AztecTown1 == 1 and HEALTH of WonderTemple == 1.0

        enable predefined sky "VOLCANO" time 15
        Weather[0] = create SCRIPT_OBJECT_TYPE_WEATHER_THING WEATHER_INFO_MEDIUM_CLOUD at {PlayerTown} + {0, 0, 0}
        set cloud for Weather[0] above {PlayerTown} + {0, 30, 0}
        set cloud generation 7
        set Weather[0] properties rainfall 1 snowfall 0 overcast 0.9
        SCALE of Weather[0] = 5

        Weather[1] = create SCRIPT_OBJECT_TYPE_WEATHER_THING WEATHER_INFO_MEDIUM_CLOUD at {PlayerTown} + {250, 0, 0}
        set cloud for Weather[1] above {PlayerTown} + {250, 30, 0}
        set cloud generation 7
        set Weather[1] properties rainfall 1 snowfall 0 overcast 0.9
        SCALE of Weather[1] = 5

        Weather[2] = create SCRIPT_OBJECT_TYPE_WEATHER_THING WEATHER_INFO_MEDIUM_CLOUD at {PlayerTown} + {0, 0, 250}
        set cloud for Weather[2] above {PlayerTown} + {0, 30, 250}
        set cloud generation 7
        set Weather[2] properties rainfall 1 snowfall 0 overcast 0.9
        SCALE of Weather[2] = 5

        Weather[3] = create SCRIPT_OBJECT_TYPE_WEATHER_THING WEATHER_INFO_MEDIUM_CLOUD at {PlayerTown} + {-250, 0, 0}
        set cloud for Weather[3] above {PlayerTown} + {-250, 30, 0}
        set cloud generation 7
        set Weather[3] properties rainfall 1 snowfall 0 overcast 0.9
        SCALE of Weather[3] = 5

        Weather[4] = create SCRIPT_OBJECT_TYPE_WEATHER_THING WEATHER_INFO_MEDIUM_CLOUD at {PlayerTown} + {0, 0, -250}
        set cloud for Weather[4] above {PlayerTown} + {0, 30, -250}
        set cloud generation 7
        set Weather[4] properties rainfall 1 snowfall 0 overcast 0.9
        SCALE of Weather[4] = 5

        Weather[5] = create SCRIPT_OBJECT_TYPE_WEATHER_THING WEATHER_INFO_MEDIUM_CLOUD at {PlayerTown} + {0, 0, 0}
        set cloud for Weather[5] above {PlayerTown} + {0, 30, 0}
        set cloud generation 7
        set Weather[5] properties rainfall 1 snowfall 0 overcast 0.9
        SCALE of Weather[5] = 5

        run background script LC9_FireRainTempleEffects(Weather[0])

        wait 90 seconds

        Position = marker at {Weather[0]} + {0, -30, 0}
        run background script LC9_WeatherLightning(Position, Weather[0])

        wait 30 seconds

        Position = marker at {Weather[0]} + {0, 500, 0}
        run background script LC9_FireBalls(Position, Weather[0])
        run background script LC9_FireBallsBarrel(Position, Weather[0])

        if Difficulty == 1
            wait 30 seconds
        elsif Difficulty == 2
            wait 60 seconds
        elsif Difficulty == 3
            wait 90 seconds
        else
            wait 120 seconds
        end if

        delete Weather[0]
        delete Weather[1]
        delete Weather[2]
        delete Weather[3]
        delete Weather[4]
        delete Weather[5]

        enable predefined sky "DEFAULT" time 10
    //end if

end script LC9_FireRain

begin script LC9_GetNearestSettlement

    NearestTown = 0

start

begin loop
    if PLAYER of AztecCapital == 0
        NearestTown = AztecCapital

    elsif PLAYER of AztecTown1 == 0
        NearestTown = AztecTown1

    elsif PLAYER of AztecTown2 == 0
        NearestTown = AztecTown2

    elsif PLAYER of AztecTown3 == 0
        NearestTown = AztecTown3

    elsif PLAYER of MinorTown8 == 0
        NearestTown = MinorTown8

    elsif PLAYER of MinorTown4 == 0
        NearestTown = MinorTown4

    else
        NearestTown = PlayerTown

    end if

    NearestSettlement = NearestTown
    wait 45 seconds
end loop

end script LC9_GetNearestSettlement

begin script LC9_Build_Aztec_Capital

start
    
    wait 720 * BuilderModifier seconds
    if PLAYER of AztecCapital == 1
        build all town AztecCapital buildings in group 1
    end if
    wait 400 * BuilderModifier seconds
    if PLAYER of AztecCapital == 1
        build all town AztecCapital buildings in group 2
    end if

end script LC9_Build_Aztec_Capital

begin script LC9_AztecCapitalRessourceManager

start

begin loop

    wait 5 seconds

    if PLAYER of AztecCapital == 1
        if (get town AztecCapital RESOURCE_TYPE_ORE total < 26000)
            add resource RESOURCE_TYPE_ORE number from 100 to 500 to AztecCapital
        elsif (get town AztecCapital RESOURCE_TYPE_WOOD total < 45000)
            add resource RESOURCE_TYPE_WOOD number from 500 to 1000 to AztecCapital
        elsif (get town AztecCapital RESOURCE_TYPE_FOOD total < 39025)
            add resource RESOURCE_TYPE_FOOD number from 1500 to 2500 to AztecCapital
        end if
    end if
    
    until PLAYER of AztecCapital != 1
end loop    

end script LC9_AztecCapitalRessourceManager

begin script LC9_AztecCapitalVillagerManager

    Counter = 0
    Villager = 0
    HousesBuilt = 0

start

begin loop

    wait 1450 * BuilderModifier seconds
    Counter = 0

    if PLAYER of AztecCapital == 1
        if HousesBuilt == 0
            HousesBuilt = 1
            build all town AztecCapital buildings in group 10
        end if
        begin loop
            Villager = create random villager of tribe TRIBE_TYPE_AZTEC at {AztecCapital} + {number from -12 to 12, 0, number from -12 to 12}//create VILLAGER VILLAGER_INFO_JAPANESE_FORESTER_MALE at {1013.581, 132.333, 2002.798} + {number from -3 to 3, 0, number from -3 to 3}
            attach Villager to AztecCapital
            release Villager
            
            wait number from 6 to 10 seconds
            Counter++
            until Counter >= 20 or PLAYER of AztecCapital != 1
        end loop
    end if

end loop

end script LC9_AztecCapitalVillagerManager

begin script LC9_AztecTown1RessourceManager

start

begin loop

    wait 5 seconds

    if PLAYER of AztecTown1 == 1
        if (get town AztecTown1 RESOURCE_TYPE_ORE total < 10000)
            add resource RESOURCE_TYPE_ORE number from 100 to 500 to AztecTown1
        elsif (get town AztecTown1 RESOURCE_TYPE_WOOD total < 19500)
            add resource RESOURCE_TYPE_WOOD number from 500 to 1000 to AztecTown1
        elsif (get town AztecTown1 RESOURCE_TYPE_FOOD total < 27000)
            add resource RESOURCE_TYPE_FOOD number from 500 to 1500 to AztecTown1
        end if
    end if
    
    until PLAYER of AztecTown1 != 1
end loop    

end script LC9_AztecTown1RessourceManager

begin script LC9_AztecTown1VillagerManager

    Counter = 0
    Villager = 0
    HousesBuilt = 0

start

begin loop

    wait 1450 * BuilderModifier seconds
    Counter = 0

    if PLAYER of AztecTown1 == 1
        if HousesBuilt == 0
            HousesBuilt = 1
            build all town AztecTown1 buildings in group 10
        end if
        begin loop
            Villager = create random villager of tribe TRIBE_TYPE_AZTEC at {AztecTown1} + {number from -12 to 12, 0, number from -12 to 12}//create VILLAGER VILLAGER_INFO_JAPANESE_FORESTER_MALE at {1013.581, 132.333, 2002.798} + {number from -3 to 3, 0, number from -3 to 3}
            attach Villager to AztecTown1
            release Villager
            
            wait number from 6 to 10 seconds
            Counter++
            until Counter >= 20 or PLAYER of AztecTown1 != 1
        end loop
    end if

end loop

end script LC9_AztecTown1VillagerManager

begin script LC9_AztecTown2RessourceManager

start

begin loop

    wait 5 seconds

    if PLAYER of AztecTown2 == 1
        if (get town AztecTown2 RESOURCE_TYPE_ORE total < 17500)
            add resource RESOURCE_TYPE_ORE number from 100 to 500 to AztecTown2
        elsif (get town AztecTown2 RESOURCE_TYPE_WOOD total < 18500)
            add resource RESOURCE_TYPE_WOOD number from 500 to 1000 to AztecTown2
        elsif (get town AztecTown2 RESOURCE_TYPE_FOOD total < 18500)
            add resource RESOURCE_TYPE_FOOD number from 500 to 1500 to AztecTown2
        end if
    end if
    
    until PLAYER of AztecTown2 != 1
end loop    

end script LC9_AztecTown2RessourceManager

begin script LC9_AztecTown2VillagerManager

    Counter = 0
    Villager = 0
    HousesBuilt = 0

start

begin loop

    wait 1450 * BuilderModifier seconds
    Counter = 0

    if PLAYER of AztecTown2 == 1
        if HousesBuilt == 0
            HousesBuilt = 1
            build all town AztecTown2 buildings in group 10
        end if
        begin loop
            Villager = create random villager of tribe TRIBE_TYPE_AZTEC at {AztecTown2} + {number from -12 to 12, 0, number from -12 to 12}//create VILLAGER VILLAGER_INFO_JAPANESE_FORESTER_MALE at {1013.581, 132.333, 2002.798} + {number from -3 to 3, 0, number from -3 to 3}
            attach Villager to AztecTown2
            release Villager
            
            wait number from 6 to 10 seconds
            Counter++
            until Counter >= 15 or PLAYER of AztecTown2 != 1
        end loop
    end if

end loop

end script LC9_AztecTown2VillagerManager

begin script LC9_AztecTown3RessourceManager

start

begin loop

    wait 5 seconds

    if PLAYER of AztecTown3 == 1
        if (get town AztecTown3 RESOURCE_TYPE_ORE total < 3500)
            add resource RESOURCE_TYPE_ORE number from 100 to 500 to AztecTown3
        elsif (get town AztecTown3 RESOURCE_TYPE_WOOD total < 10000)
            add resource RESOURCE_TYPE_WOOD number from 500 to 1000 to AztecTown3
        elsif (get town AztecTown3 RESOURCE_TYPE_FOOD total < 10000)
            add resource RESOURCE_TYPE_FOOD number from 500 to 1500 to AztecTown3
        end if
    end if
    
    until PLAYER of AztecTown3 != 1
end loop    

end script LC9_AztecTown3RessourceManager

begin script LC9_AztecTown3VillagerManager

    Counter = 0
    Villager = 0
    HousesBuilt = 0

start

begin loop

    wait 1450 * BuilderModifier seconds
    Counter = 0

    if PLAYER of AztecTown3 == 1
        if HousesBuilt == 0
            HousesBuilt = 1
            build all town AztecTown3 buildings in group 10
        end if
        begin loop
            Villager = create random villager of tribe TRIBE_TYPE_AZTEC at {AztecTown3} + {number from -12 to 12, 0, number from -12 to 12}//create VILLAGER VILLAGER_INFO_JAPANESE_FORESTER_MALE at {1013.581, 132.333, 2002.798} + {number from -3 to 3, 0, number from -3 to 3}
            attach Villager to AztecTown3
            release Villager
            
            wait number from 6 to 10 seconds
            Counter++
            until Counter >= 10 or PLAYER of AztecTown3 != 1
        end loop
    end if

end loop

end script LC9_AztecTown3VillagerManager

begin script LC9_PlatoonBehaivors

start

begin loop
    if town AztecCapital is under takeover from player 0
        enable platoon LC9_Platoon[0] respond to town AztecCapital attack
        enable platoon LC9_Platoon[1] respond to town AztecCapital attack
        enable platoon LC9_Platoon[2] respond to town AztecCapital attack
        enable platoon LC9_Platoon[3] respond to town AztecCapital attack
        enable platoon LC9_Platoon[4] respond to town AztecCapital attack
        enable platoon LC9_Platoon[5] respond to town AztecCapital attack
        enable platoon LC9_Platoon[6] respond to town AztecCapital attack
        enable platoon LC9_Platoon[7] respond to town AztecCapital attack
        enable platoon LC9_Platoon[8] respond to town AztecCapital attack
        enable platoon LC9_WallArcher[0] respond to town AztecCapital attack
        enable platoon LC9_WallArcher[1] respond to town AztecCapital attack
        enable platoon LC9_WallArcher[2] respond to town AztecCapital attack
        enable platoon LC9_WallArcher[3] respond to town AztecCapital attack
        enable platoon LC9_WallArcher[4] respond to town AztecCapital attack
        enable platoon LC9_WallArcher[5] respond to town AztecCapital attack
        enable platoon LC9_WallArcher[6] respond to town AztecCapital attack
        enable platoon LC9_WallArcher[7] respond to town AztecCapital attack
    else
        disable platoon LC9_Platoon[0] respond to town AztecCapital attack
        disable platoon LC9_Platoon[1] respond to town AztecCapital attack
        disable platoon LC9_Platoon[2] respond to town AztecCapital attack
        disable platoon LC9_Platoon[3] respond to town AztecCapital attack
        disable platoon LC9_Platoon[4] respond to town AztecCapital attack
        disable platoon LC9_Platoon[5] respond to town AztecCapital attack
        disable platoon LC9_Platoon[6] respond to town AztecCapital attack
        disable platoon LC9_Platoon[7] respond to town AztecCapital attack
        disable platoon LC9_Platoon[8] respond to town AztecCapital attack
        disable platoon LC9_WallArcher[0] respond to town AztecCapital attack
        disable platoon LC9_WallArcher[1] respond to town AztecCapital attack
        disable platoon LC9_WallArcher[2] respond to town AztecCapital attack
        disable platoon LC9_WallArcher[3] respond to town AztecCapital attack
        disable platoon LC9_WallArcher[4] respond to town AztecCapital attack
        disable platoon LC9_WallArcher[5] respond to town AztecCapital attack
        disable platoon LC9_WallArcher[6] respond to town AztecCapital attack
        disable platoon LC9_WallArcher[7] respond to town AztecCapital attack
    end if
    wait number from 5 to 10 seconds
end loop

end script LC9_PlatoonBehaivors


begin script LC9_FireRainTempleEffects(Weather)

    Visual1 = 0
    Visual2 = 0
    Visual3 = 0

start

Visual1 = create visual effect VISUAL_EFFECT_EPIC_VOLCANO_BEAM_PULSE_UP at {WonderTemple} time -1 target {WonderTemple}
Visual3 = create visual effect VISUAL_EFFECT_EPIC_VOLCANO_BEAM at {WonderTemple} time -1 target {WonderTemple}
set Visual1 colour red 192 green 0 blue 0
set Visual3 colour red 192 green 0 blue 0

begin loop
    wait number from 1 to 2 seconds

    Visual2 = create visual effect VISUAL_EFFECT_MIRACLE_CHARGE at {WonderTemple} + {0,1.5,0} time 7.5
    set Visual2 colour red 192 green 0 blue 0
    SCALE of Visual2 = 6

    until Weather not exists
end loop

delete Visual1 with fade
delete Visual2 with fade
delete Visual3 with fade

end script LC9_FireRainTempleEffects

begin script LC9_FireBalls(Position, Weather)

FireBall = 0
FireBallStart = 0
FireBallTarget = 0

start

begin loop
    wait number from 1 to 2.25 seconds
    FireBallStart = marker at ({Position} + {number from -175 to 175, number from -10 to 15, number from -175 to 175})
    FireBallTarget = marker at ({FireBallStart} + {number from -5 to 5, number from -5 to -15, number from -5 to 5})
    FireBall = make player 2 throw miracle MIRACLE_TYPE_FIRE from ({FireBallStart} + {0,-3.0,0}) heading ({FireBallTarget} + {0,21,0} - {FireBallStart})

    until Weather not exists
end loop

end script LC9_FireBalls

begin script LC9_FireBallsBarrel(Position, Weather)

FireBall = 0
FireBallStart = 0
FireBallTarget = 0
Counter = 0
Timer = create timer for 0 seconds

start

wait 15 seconds

begin loop
    if Counter < 9 and get Timer time remaining == 0
        wait number from 0.25 to 0.5 seconds
        FireBallStart = marker at ({Position} + {number from -175 to 175, number from -10 to 15, number from -175 to 175})
        FireBallTarget = marker at ({FireBallStart} + {number from -5 to 5, number from -5 to -15, number from -5 to 5})
        FireBall = make player 2 throw miracle MIRACLE_TYPE_FIRE from ({FireBallStart} + {0,-3.0,0}) heading ({FireBallTarget} + {0,21,0} - {FireBallStart})
        Counter++
    elsif Counter >= 9
        Counter = 0
        Timer = create timer for 20 seconds
    end if

    until Weather not exists
end loop

end script LC9_FireBallsBarrel

begin script LC9_WeatherLightning(Position, Weather)

start

begin loop
    wait number from 5 to 10 seconds
    set lightning strike at {Position} + {number from -80 to 80,0,number from -80 to 80} from Weather scale 1

    until Weather not exists
end loop

end script LC9_WeatherLightning

begin script DisableLocalPlatoonResponse

    Counter = 0

start

begin loop
    if Counter > 99
        Counter = 0
        wait 30 seconds
    end if
    if LC9_Platoon[Counter] exists
        disable platoon LC9_Platoon[Counter] respond to local platoon attack
    end if
    if LC9_WallArcher[Counter] exists
        disable platoon LC9_WallArcher[Counter] respond to local platoon attack
    end if
    Counter++
end loop

end script DisableLocalPlatoonResponse