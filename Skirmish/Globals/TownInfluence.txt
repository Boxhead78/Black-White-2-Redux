///////////////////////////////////////////////////////////////////////////////
//          Town Influence Extender
//    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
//
//    This script makes town influence extending, depending on how many 
//    villagers are living in the specified town.
//
///////////////////////////////////////////////////////////////////////////////

define script TownInfluenceExtender

run script TownInfluenceExtender

begin script TownInfluenceExtender

    TownCounter = 0
    Town[15]//15 Towns max. supported
    TownInfluence[15]
    TownEnemyInfluence[15]
    TownSize = 0

start

begin loop

    if TownCounter >= 14
        TownCounter = 0
    end if

    Town[TownCounter] = get town with id TownCounter
    if PLAYER of Town[TownCounter] == 0
        if size of Town[TownCounter] >= 40 and TownInfluence[TownCounter] == 0
            TownInfluence[TownCounter] += 1
            extend town Town[TownCounter] influence by 5 / 2

        elsif size of Town[TownCounter] < 40 and TownInfluence[TownCounter] == 1
            TownInfluence[TownCounter] -= 1
            extend town Town[TownCounter] influence by 0 / 2

        end if
        
        if size of Town[TownCounter] >= 80 and TownInfluence[TownCounter] == 1
            TownInfluence[TownCounter] += 1
            extend town Town[TownCounter] influence by 10 / 2

        elsif size of Town[TownCounter] < 80 and TownInfluence[TownCounter] == 2
            TownInfluence[TownCounter] -= 1
            extend town Town[TownCounter] influence by 5 / 2

        end if

        if size of Town[TownCounter] >= 120 and TownInfluence[TownCounter] == 2
            TownInfluence[TownCounter] += 1
            extend town Town[TownCounter] influence by 15 / 2

        elsif size of Town[TownCounter] < 120 and TownInfluence[TownCounter] == 3
            TownInfluence[TownCounter] -= 1
            extend town Town[TownCounter] influence by 10 / 2

        end if

        if size of Town[TownCounter] >= 160 and TownInfluence[TownCounter] == 3
            TownInfluence[TownCounter] += 1
            extend town Town[TownCounter] influence by 20 / 2

        elsif size of Town[TownCounter] < 160 and TownInfluence[TownCounter] == 4
            TownInfluence[TownCounter] -= 1
            extend town Town[TownCounter] influence by 15 / 2

        end if

        if size of Town[TownCounter] >= 200 and TownInfluence[TownCounter] == 4
            TownInfluence[TownCounter] += 1
            extend town Town[TownCounter] influence by 25 / 2

        elsif size of Town[TownCounter] < 200 and TownInfluence[TownCounter] == 5
            TownInfluence[TownCounter] -= 1
            extend town Town[TownCounter] influence by 20 / 2

        end if

        if size of Town[TownCounter] >= 240 and TownInfluence[TownCounter] == 5
            TownInfluence[TownCounter] += 1
            extend town Town[TownCounter] influence by 30 / 2

        elsif size of Town[TownCounter] < 240 and TownInfluence[TownCounter] == 6
            TownInfluence[TownCounter] -= 1
            extend town Town[TownCounter] influence by 25 / 2

        end if
        
        if size of Town[TownCounter] >= 280 and TownInfluence[TownCounter] == 6
            TownInfluence[TownCounter] += 1
            extend town Town[TownCounter] influence by 35 / 2

        elsif size of Town[TownCounter] < 280 and TownInfluence[TownCounter] == 7
            TownInfluence[TownCounter] -= 1
            extend town Town[TownCounter] influence by 30 / 2

        end if

        if size of Town[TownCounter] >= 320 and TownInfluence[TownCounter] == 7
            TownInfluence[TownCounter] += 1
            extend town Town[TownCounter] influence by 40 / 2

        elsif size of Town[TownCounter] < 320 and TownInfluence[TownCounter] == 8
            TownInfluence[TownCounter] -= 1
            extend town Town[TownCounter] influence by 35 / 2

        end if

        if size of Town[TownCounter] >= 360 and TownInfluence[TownCounter] == 8
            TownInfluence[TownCounter] += 1
            extend town Town[TownCounter] influence by 45 / 2

        elsif size of Town[TownCounter] < 360 and TownInfluence[TownCounter] == 9
            TownInfluence[TownCounter] -= 1
            extend town Town[TownCounter] influence by 40 / 2

        end if

        if size of Town[TownCounter] >= 400 and TownInfluence[TownCounter] == 9
            TownInfluence[TownCounter] += 1
            extend town Town[TownCounter] influence by 50 / 2

        elsif size of Town[TownCounter] < 400 and TownInfluence[TownCounter] == 10
            TownInfluence[TownCounter] -= 1
            extend town Town[TownCounter] influence by 45 / 2

        end if

        if size of Town[TownCounter] >= 440 and TownInfluence[TownCounter] == 10
            TownInfluence[TownCounter] += 1
            extend town Town[TownCounter] influence by 55 / 2

        elsif size of Town[TownCounter] < 440 and TownInfluence[TownCounter] == 11
            TownInfluence[TownCounter] -= 1
            extend town Town[TownCounter] influence by 50 / 2

        end if
        
        if size of Town[TownCounter] >= 480 and TownInfluence[TownCounter] == 11
            TownInfluence[TownCounter] += 1
            extend town Town[TownCounter] influence by 60 / 2

        elsif size of Town[TownCounter] < 480 and TownInfluence[TownCounter] == 12
            TownInfluence[TownCounter] -= 1
            extend town Town[TownCounter] influence by 55 / 2

        end if

        if size of Town[TownCounter] >= 520 and TownInfluence[TownCounter] == 12
            TownInfluence[TownCounter] += 1
            extend town Town[TownCounter] influence by 65 / 2

        elsif size of Town[TownCounter] < 520 and TownInfluence[TownCounter] == 13
            TownInfluence[TownCounter] -= 1
            extend town Town[TownCounter] influence by 60 / 2

        end if

        if size of Town[TownCounter] >= 560 and TownInfluence[TownCounter] == 13
            TownInfluence[TownCounter] += 1
            extend town Town[TownCounter] influence by 70 / 2

        elsif size of Town[TownCounter] < 560 and TownInfluence[TownCounter] == 14
            TownInfluence[TownCounter] -= 1
            extend town Town[TownCounter] influence by 65 / 2

        end if

        if size of Town[TownCounter] >= 600 and TownInfluence[TownCounter] == 14
            TownInfluence[TownCounter] += 1
            extend town Town[TownCounter] influence by 75 / 2

        elsif size of Town[TownCounter] < 600 and TownInfluence[TownCounter] == 15
            TownInfluence[TownCounter] -= 1
            extend town Town[TownCounter] influence by 70 / 2

        end if

        if size of Town[TownCounter] >= 640 and TownInfluence[TownCounter] == 14
            TownInfluence[TownCounter] += 1
            extend town Town[TownCounter] influence by 80 / 2

        elsif size of Town[TownCounter] < 640 and TownInfluence[TownCounter] == 15
            TownInfluence[TownCounter] -= 1
            extend town Town[TownCounter] influence by 75 / 2

        end if

        if size of Town[TownCounter] >= 680 and TownInfluence[TownCounter] == 14
            TownInfluence[TownCounter] += 1
            extend town Town[TownCounter] influence by 85 / 2

        elsif size of Town[TownCounter] < 680 and TownInfluence[TownCounter] == 15
            TownInfluence[TownCounter] -= 1
            extend town Town[TownCounter] influence by 80 / 2

        end if

        if size of Town[TownCounter] >= 720 and TownInfluence[TownCounter] == 14
            TownInfluence[TownCounter] += 1
            extend town Town[TownCounter] influence by 90 / 2

        elsif size of Town[TownCounter] < 720 and TownInfluence[TownCounter] == 15
            TownInfluence[TownCounter] -= 1
            extend town Town[TownCounter] influence by 85 / 2

        end if
    else //Reset if town has been captured
        TownInfluence[TownCounter] = 0
    end if

    if PLAYER of Town[TownCounter] >= 1 and PLAYER of Town[TownCounter] < 7
        if size of Town[TownCounter] >= 40 and TownInfluence[TownCounter] == 0
            TownInfluence[TownCounter] += 1
            extend town Town[TownCounter] influence by 5 / 4

        elsif size of Town[TownCounter] < 40 and TownInfluence[TownCounter] == 1
            TownInfluence[TownCounter] -= 1
            extend town Town[TownCounter] influence by 0 / 4

        end if
        
        if size of Town[TownCounter] >= 80 and TownInfluence[TownCounter] == 1
            TownInfluence[TownCounter] += 1
            extend town Town[TownCounter] influence by 10 / 4

        elsif size of Town[TownCounter] < 80 and TownInfluence[TownCounter] == 2
            TownInfluence[TownCounter] -= 1
            extend town Town[TownCounter] influence by 5 / 4

        end if

        if size of Town[TownCounter] >= 120 and TownInfluence[TownCounter] == 2
            TownInfluence[TownCounter] += 1
            extend town Town[TownCounter] influence by 15 / 4

        elsif size of Town[TownCounter] < 120 and TownInfluence[TownCounter] == 3
            TownInfluence[TownCounter] -= 1
            extend town Town[TownCounter] influence by 10 / 4

        end if

        if size of Town[TownCounter] >= 160 and TownInfluence[TownCounter] == 3
            TownInfluence[TownCounter] += 1
            extend town Town[TownCounter] influence by 20 / 4

        elsif size of Town[TownCounter] < 160 and TownInfluence[TownCounter] == 4
            TownInfluence[TownCounter] -= 1
            extend town Town[TownCounter] influence by 15 / 4

        end if

        if size of Town[TownCounter] >= 200 and TownInfluence[TownCounter] == 4
            TownInfluence[TownCounter] += 1
            extend town Town[TownCounter] influence by 25 / 4

        elsif size of Town[TownCounter] < 200 and TownInfluence[TownCounter] == 5
            TownInfluence[TownCounter] -= 1
            extend town Town[TownCounter] influence by 20 / 4

        end if

        if size of Town[TownCounter] >= 240 and TownInfluence[TownCounter] == 5
            TownInfluence[TownCounter] += 1
            extend town Town[TownCounter] influence by 30 / 4

        elsif size of Town[TownCounter] < 240 and TownInfluence[TownCounter] == 6
            TownInfluence[TownCounter] -= 1
            extend town Town[TownCounter] influence by 25 / 4

        end if
        
        if size of Town[TownCounter] >= 280 and TownInfluence[TownCounter] == 6
            TownInfluence[TownCounter] += 1
            extend town Town[TownCounter] influence by 35 / 4

        elsif size of Town[TownCounter] < 280 and TownInfluence[TownCounter] == 7
            TownInfluence[TownCounter] -= 1
            extend town Town[TownCounter] influence by 30 / 4

        end if

        if size of Town[TownCounter] >= 320 and TownInfluence[TownCounter] == 7
            TownInfluence[TownCounter] += 1
            extend town Town[TownCounter] influence by 40 / 4

        elsif size of Town[TownCounter] < 320 and TownInfluence[TownCounter] == 8
            TownInfluence[TownCounter] -= 1
            extend town Town[TownCounter] influence by 35 / 4

        end if

        if size of Town[TownCounter] >= 360 and TownInfluence[TownCounter] == 8
            TownInfluence[TownCounter] += 1
            extend town Town[TownCounter] influence by 45 / 4

        elsif size of Town[TownCounter] < 360 and TownInfluence[TownCounter] == 9
            TownInfluence[TownCounter] -= 1
            extend town Town[TownCounter] influence by 40 / 4

        end if

        if size of Town[TownCounter] >= 400 and TownInfluence[TownCounter] == 9
            TownInfluence[TownCounter] += 1
            extend town Town[TownCounter] influence by 50 / 4

        elsif size of Town[TownCounter] < 400 and TownInfluence[TownCounter] == 10
            TownInfluence[TownCounter] -= 1
            extend town Town[TownCounter] influence by 45 / 4

        end if

        if size of Town[TownCounter] >= 440 and TownInfluence[TownCounter] == 10
            TownInfluence[TownCounter] += 1
            extend town Town[TownCounter] influence by 55 / 4

        elsif size of Town[TownCounter] < 440 and TownInfluence[TownCounter] == 11
            TownInfluence[TownCounter] -= 1
            extend town Town[TownCounter] influence by 50 / 4

        end if
        
        if size of Town[TownCounter] >= 480 and TownInfluence[TownCounter] == 11
            TownInfluence[TownCounter] += 1
            extend town Town[TownCounter] influence by 60 / 4

        elsif size of Town[TownCounter] < 480 and TownInfluence[TownCounter] == 12
            TownInfluence[TownCounter] -= 1
            extend town Town[TownCounter] influence by 55 / 4

        end if

        if size of Town[TownCounter] >= 520 and TownInfluence[TownCounter] == 12
            TownInfluence[TownCounter] += 1
            extend town Town[TownCounter] influence by 65 / 4

        elsif size of Town[TownCounter] < 520 and TownInfluence[TownCounter] == 13
            TownInfluence[TownCounter] -= 1
            extend town Town[TownCounter] influence by 60 / 4

        end if

        if size of Town[TownCounter] >= 560 and TownInfluence[TownCounter] == 13
            TownInfluence[TownCounter] += 1
            extend town Town[TownCounter] influence by 70 / 4

        elsif size of Town[TownCounter] < 560 and TownInfluence[TownCounter] == 14
            TownInfluence[TownCounter] -= 1
            extend town Town[TownCounter] influence by 65 / 4

        end if

        if size of Town[TownCounter] >= 600 and TownInfluence[TownCounter] == 14
            TownInfluence[TownCounter] += 1
            extend town Town[TownCounter] influence by 75 / 4

        elsif size of Town[TownCounter] < 600 and TownInfluence[TownCounter] == 15
            TownInfluence[TownCounter] -= 1
            extend town Town[TownCounter] influence by 70 / 4

        end if

        if size of Town[TownCounter] >= 640 and TownInfluence[TownCounter] == 14
            TownInfluence[TownCounter] += 1
            extend town Town[TownCounter] influence by 80 / 4

        elsif size of Town[TownCounter] < 640 and TownInfluence[TownCounter] == 15
            TownInfluence[TownCounter] -= 1
            extend town Town[TownCounter] influence by 75 / 4

        end if

        if size of Town[TownCounter] >= 680 and TownInfluence[TownCounter] == 14
            TownInfluence[TownCounter] += 1
            extend town Town[TownCounter] influence by 85 / 4

        elsif size of Town[TownCounter] < 680 and TownInfluence[TownCounter] == 15
            TownInfluence[TownCounter] -= 1
            extend town Town[TownCounter] influence by 80 / 4

        end if

        if size of Town[TownCounter] >= 720 and TownInfluence[TownCounter] == 14
            TownInfluence[TownCounter] += 1
            extend town Town[TownCounter] influence by 90 / 4

        elsif size of Town[TownCounter] < 720 and TownInfluence[TownCounter] == 15
            TownInfluence[TownCounter] -= 1
            extend town Town[TownCounter] influence by 85 / 4

        end if
    else //Reset if town has been captured
        TownEnemyInfluence[TownCounter] = 0
    end if

    TownCounter++
end loop

end script TownInfluenceExtender